/**
 * Tencent weibo javascript library
 *
 * Provide the namespace with some core methods
 *
 * @author michalliu
 * @version 1.0
 * @module base
 *//**
 * Constructor of SDK's error object
 *
 * Usage:
 *
 * throw QQWBError("message")
 *
 * @access public
 *
 * function QQWBError(message) {
 *     this.message = message;
 *     this.stack = (new Error()).stack;
 * }
 * 
 * QQWBError.prototype = new Error;
 * QQWBError.prototype.name = "QQWBError";
 */// base file
(function(){var a,b=window.T,c="http";scheme=c+"://",host="open.t.qq.com",a={_name:"Tencent weibo SDK",_appkey:"{APPKEY}",_appkeyVerified:!1,_debug:!0,_domain:{api:scheme+host+"{API_URI}",auth:scheme+host+"{AUTH_URI}",query:scheme+host+"{QUERY_TOKEN_URI}",exchange:scheme+host+"{EXCHANGE_TOKEN_URI}",flashproxy:scheme+host+"{FLASHPROXY_URI}",serverproxy:scheme+host+"{SERVERPROXY_URI}",clientproxy:"{CLIENTPROXY_URI}"},_cookie:{names:{accessToken:"QQWBToken",refreshToken:"QQWBRefreshToken"},path:"/",domain:""},noConflict:function(){return b&&(window.T=b),a},copy:function(a,b,c,d){for(var e in b)if(c||typeof a[e]=="undefined")a[e]=d?d(b[e]):b[e];return a},create:function(a,b){var c=this,d=a?a.split("."):[],e=d.length;for(var f=0;f<e;f++){var g=d[f],h=c[g];h||(h=b&&f+1===e?b:{},c[g]=h),c=h}return c},extend:function(b,c,d){return a.copy(typeof b=="string"?a.create.call(this,b):b,c,d)},_alias:function(b,c){c=c||a;if(typeof b=="string")this[b]=c;else if(Object.prototype.toString.call(b)==="[object Array]")for(var d=0,e=b.length;d<e;d++)this[b[d]]=c},alias:function(b,c){a._alias(b,a[c])},assign:function(a,b,c){var d=this,e=d,f=a?a.split("."):[],g=f.length;for(var h=0;h<g;h++){var i=f[h],j=d[i];if(!j)throw new Error("Tencent weibo SDK: [ERROR] no such name "+i);e=d,d=j}if(typeof d=="string")e[i]=d.replace(new RegExp("\\{"+b+"\\}","ig"),c);else if(typeof d=="object")for(var k in d)d.hasOwnProperty(k)&&typeof d[k]=="string"&&(d[k]=d[k].replace(new RegExp("\\{"+b+"\\}","ig"),c))},uid:function(){return Math.random().toString(16).substr(2)}},a.alias("provide","create"),a._alias.call(window,["QQWB","T"],a),a.assign("_domain","API_URI","/api"),a.assign("_domain","AUTH_URI","/oauth_html/loginV2mini.php"),a.assign("_domain","EXCHANGE_TOKEN_URI","/cgi-bin/exchange_token"),a.assign("_domain","QUERY_TOKEN_URI","/cgi-bin/auto_token"),a.assign("_domain","SERVERPROXY_URI","/media/proxy.html"),a.assign("_domain","FLASHPROXY_URI","/media/proxy.swf")})(),function(){var a=function(){function b(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function c(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")}var d=function(){return d.cache.hasOwnProperty(arguments[0])||(d.cache[arguments[0]]=d.parse(arguments[0])),d.format.call(null,d.cache[arguments[0]],arguments)};return d.format=function(d,e){var f=1,g=d.length,h="",i,j=[],k,l,m,n,o,p;for(k=0;k<g;k++){h=b(d[k]);if(h==="string")j.push(d[k]);else if(h==="array"){m=d[k];if(m[2]){i=e[f];for(l=0;l<m[2].length;l++){if(!i.hasOwnProperty(m[2][l]))throw a('[sprintf] property "%s" does not exist',m[2][l]);i=i[m[2][l]]}}else m[1]?i=e[m[1]]:i=e[f++];if(/[^s]/.test(m[8])&&b(i)!="number")throw a("[sprintf] expecting number but found %s",b(i));switch(m[8]){case"b":i=i.toString(2);break;case"c":i=String.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=m[7]?i.toExponential(m[7]):i.toExponential();break;case"f":i=m[7]?parseFloat(i).toFixed(m[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=i?String(i):"")&&m[7]?i.substring(0,m[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(m[8])&&m[3]&&i>=0?"+"+i:i,o=m[4]?m[4]=="0"?"0":m[4].charAt(1):" ",p=m[6]-String(i).length,n=m[6]?c(o,p):"",j.push(m[5]?i+n:n+i)}}return j.join("")},d.cache={},d.parse=function(a){var b=a,c=[],d=[],e=0;while(b){if((c=/^[^\x25]+/.exec(b))!==null)d.push(c[0]);else if((c=/^\x25{2}/.exec(b))!==null)d.push("%");else{if((c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b))===null)throw"[sprintf] huh?";if(c[2]){e|=1;var f=[],g=c[2],h=[];if((h=/^([a-z_][a-z_\d]*)/i.exec(g))===null)throw"[sprintf] huh?";f.push(h[1]);while((g=g.substring(h[0].length))!=="")if((h=/^\.([a-z_][a-z_\d]*)/i.exec(g))!==null)f.push(h[1]);else if((h=/^\[(\d+)\]/.exec(g))!==null)f.push(h[1]);else throw"[sprintf] huh?";c[2]=f}else e|=2;if(e===3)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";d.push(c)}b=b.substring(c[0].length)}return d},d}(),b=function(b,c){return c.unshift(b),a.apply(null,c)};QQWB.extend("format",{sprintf:a,vsprintf:b})}(),QQWB.extend("time",{now:function(){return+this.dateNow()},secondsNow:function(){return Math.round(this.now()/1e3)},dateNow:function(){return new Date},shortTime:function(a,b){return a instanceof Date||(b=a,a=this.dateNow()),b=b||"%(year)s/%(month)s/%(day)s %(hour)02d:%(minute)02d:%(second)02d",QQWB.format.sprintf(b,{year:a.getFullYear(),month:a.getMonth(),day:a.getDate(),hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds()})}}),QQWB.extend("log",{CRITICAL:50,ERROR:40,WARNING:30,INFO:20,DEBUG:10,NOTSET:0,_level:0,_format:"%(frame)s%(name)s: [%(levelname)s] %(time)s %(message)s",setLevel:function(a){return this._level=a,this},setFormat:function(a){return this._format=a,this},debug:function(a){return this.DEBUG>=this._level&&this._out("DEBUG",a),this},info:function(a){return this.INFO>=this._level&&this._out("INFO",a),this},warning:function(a){return this.WARNING>=this._level&&this._out("WARNING",a),this},error:function(a){return this.ERROR>=this._level&&this._out("ERROR",a),this},critical:function(a){return this.CRITICAL>=this._level&&this._out("CRITICAL",a),this},_out:function(a,b){var c=this._format;c=QQWB.format.sprintf(c,{name:QQWB._name,levelname:a,time:QQWB.time.shortTime(),message:b,frame:window!=window.parent?"*":""}),this._capture&&typeof this._captureLevel=="number"&&this[a]>this._captureLevel&&this._capturedMessages&&(this._capturedMessages.length>=this._captureMaxSize&&this._capturedMessages.shift(),this._capturedMessages.push(c)),QQWB._debug&&window.console&&window.console.log(c)},startCapture:function(a,b){return this._captureLevel=a||this.NOTSET,this._captureMaxSize=b||50,this._capturedMessages=[],this._capture=!0,this},stopCapture:function(){return this._capture&&(this._capture=!1),this},lastCaptured:function(a){return a=a||"\n",this._capturedMessages?this._capturedMessages.join(a):""}}),QQWB.extend("cookie",{set:function(a,b,c,d,e){if(typeof c=="undefined"||c===null)c=-1;var f=e?"domain="+e:"",g=d?"path="+d:"",h="";return c===0?h="expires="+(new Date(1970,1,1)).toUTCString():c>0&&(h="expires="+(new Date(+(new Date)+c*1e3)).toUTCString()),document.cookie=[a+"="+b,h,g,f].join("; "),this},get:function(a){var b=a+"=";cookies=(document.cookie||"").split(/\s*;\s*/);for(var c=0,d=cookies.length;c<d;c++){var e=cookies[c];if(e.indexOf(b)===0)return e.substr(b.length)}},del:function(a,b,c){return this.set(a,"",0,b,c),document.cookie.indexOf(a+"=")>=0&&QQWB.log.warning("Cookie may not be deleted as you expected"),this}}),QQWB.extend("String",{_trimLeft:/^\s+/,_trimRight:/\s+$/,isString:function(a){return typeof a=="string"},ltrim:function(a){return a==null?"":a.toString().replace(this._trimLeft,"")},rtrim:function(a){return a==null?"":a.toString().replace(this._trimRight,"")},trim:String.prototype.trim?function(a){return a==null?"":String.prototype.trim.call(a)}:function(a){return a==null?"":a.toString().replace(this._trimLeft,"").replace(this._trimRight,"")},startsWith:String.prototype.startsWith?function(a,b){return a==null?!1:String.prototype.startsWith.call(a,b)}:function(a,b){return a==null?!1:a.toString().indexOf(b)==0},endsWith:String.prototype.endsWith?function(a,b){return a==null?!1:String.prototype.endsWith.call(a,b)}:function(a,b){return a==null?!1:a.toString().lastIndexOf(b)>=0&&a.toString().lastIndexOf(b)+b.length==a.length}}),QQWB.extend("XML",{isXML:function(a){},toString:function(a){var b;return window.ActiveXObject?b=a.xml:b=(new XMLSerializer).serializeToString(a),b},fromString:function(a){var b;if(window.ActiveXObject)b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a);else{var c=new DOMParser;b=c.parseFromString(a,"text/xml")}return b}},!0),QQWB.extend("_static",{GET:"GET",POST:"POST",GET_OR_POST:"GET | POST",CATEGORY_TIMELINE:"时间线",EMPTY_STR:"",NO_DEFAULT_VALUE:null,NO_DESCRIPTION:"暂时没有关于此参数的说明"}),QQWB.extend("_apiProvider",{apiError:{httpHeaderFlag:/X-APIErrorCode:\s+(\d+)/,1:"参数错误",2:"频率受限",3:"鉴权失败",4:"内部错误"},apis:{"/statuses/home_timeline":{category:"时间线",description:"主页时间线",supportMethod:"get",supportParams:{pageflag:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/public_timeline":{category:"时间线",description:"广播大厅时间线",supportMethod:"get",supportParams:{pos:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/user_timeline":{category:"时间线",description:"其他用户发表时间线",supportMethod:"get",supportParams:{pageflag:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:"t",description:QQWB._static.NO_DESCRIPTION},name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/mentions_timeline":{category:"时间线",description:"@提到我的时间线",supportMethod:"get",supportParams:{pageflag:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/ht_timeline":{category:"时间线",description:"话题时间线",supportMethod:"post",supportParams:{httext:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pageflag:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},pageinfo:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/broadcast_timeline":{category:"时间线",description:"我发表时间线",supportMethod:"get",supportParams:{pageflag:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/special_timeline":{category:"时间线",description:"特别收听的人发表时间线",supportMethod:"get",supportParams:{pageflag:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/broadcast_timeline_ids":{category:"时间线",description:"我发表时间线索引",supportMethod:"get",supportParams:{pageflag:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},type:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},contenttype:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},accesslevel:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/home_timeline_ids":{category:"时间线",description:"首页时间线索引",supportMethod:"get",supportParams:{pageflag:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},type:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},contenttype:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},accesslevel:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/mentions_timeline_ids":{category:"时间线",description:"提及我的时间线索引",supportMethod:"get",supportParams:{pageflag:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},type:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},contenttype:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},accesslevel:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/user_timeline_ids":{category:"时间线",description:"用户发表时间线索引",supportMethod:"get",supportParams:{pageflag:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:"t",description:QQWB._static.NO_DESCRIPTION},name:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},type:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},contenttype:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},accesslevel:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/users_timeline":{category:"时间线",description:"多用户发表时间线",supportMethod:"get",supportParams:{pageflag:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:"t,api_weibo",description:QQWB._static.NO_DESCRIPTION},names:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},type:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},contenttype:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},accesslevel:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/users_timeline_ids":{category:"时间线",description:"多用户发表时间线索引",supportMethod:"get",supportParams:{pageflag:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:"t,api_weibo",description:QQWB._static.NO_DESCRIPTION},names:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},type:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},contenttype:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},accesslevel:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/statuses/area_timeline":{category:"时间线",description:"同城发表时间线",supportMethod:"get",supportParams:{pos:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},country:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},province:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},city:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/show":{category:"微博相关",description:"获取一条微博数据",supportMethod:"get",supportParams:{id:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/add":{category:"微博相关",description:"发表一条微博",supportMethod:"post",supportParams:{content:{defalutValue:"127.0.0.1",description:QQWB._static.NO_DESCRIPTION},clientip:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},jing:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},wei:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/del":{category:"微博相关",description:"删除一条微博",supportMethod:"post",supportParams:{id:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/re_add":{category:"微博相关",description:"转播一条微博",supportMethod:"post",supportParams:{content:{defalutValue:"127.0.0.1",description:QQWB._static.NO_DESCRIPTION},clientip:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},jing:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},wei:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},reid:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/reply":{category:"微博相关",description:"回复一条微博",supportMethod:"post",supportParams:{content:{defalutValue:"127.0.0.1",description:QQWB._static.NO_DESCRIPTION},clientip:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},jing:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},wei:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},reid:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/add_pic":{category:"微博相关",description:"发表一条图片微博",supportMethod:"post",supportParams:{content:{defalutValue:"127.0.0.1",description:QQWB._static.NO_DESCRIPTION},clientip:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},jing:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},wei:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/re_count":{category:"微博相关",description:"转播数或点评数",supportMethod:"post",supportParams:{ids:{defalutValue:2,description:QQWB._static.NO_DESCRIPTION},flag:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/re_list":{category:"微博相关",description:"获取单条微博的转发和点评列表",supportMethod:"get",supportParams:{flag:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},rootid:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pageflag:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},twitterid:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/comment":{category:"微博相关",description:"点评一条微博",supportMethod:"post",supportParams:{content:{defalutValue:"127.0.0.1",description:QQWB._static.NO_DESCRIPTION},clientip:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},jing:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},wei:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},reid:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/add_music":{category:"微博相关",description:"发表音频微博",supportMethod:"post",supportParams:{content:{defalutValue:"127.0.0.1",description:QQWB._static.NO_DESCRIPTION},clientip:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},jing:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},wei:{defalutValue:"http://a.com/b.mp3",description:QQWB._static.NO_DESCRIPTION},url:{defalutValue:"歌名",description:QQWB._static.NO_DESCRIPTION},title:{defalutValue:"演唱者",description:QQWB._static.NO_DESCRIPTION},author:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/add_video":{category:"微博相关",description:"发表视频微博",supportMethod:"post",supportParams:{content:{defalutValue:"127.0.0.1",description:QQWB._static.NO_DESCRIPTION},clientip:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},jing:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},wei:{defalutValue:"http://v.youku.com/v_show/id_XMjExODczODM2.html",description:QQWB._static.NO_DESCRIPTION},url:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/getvideoinfo":{category:"微博相关",description:"获取视频信息",supportMethod:"post",supportParams:{url:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/t/list":{category:"微博相关",description:"根据微博ID批量得到微博数据",supportMethod:"get",supportParams:{ids:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/user/info":{category:"账户相关",description:"获取自己的详细资料",supportMethod:"get"},"/user/update":{category:"账户相关",description:"更新个人资料",supportMethod:"post",supportParams:{nick:{defalutValue:1,description:QQWB._static.NO_DESCRIPTION},sex:{defalutValue:2e3,description:QQWB._static.NO_DESCRIPTION},year:{defalutValue:1,description:QQWB._static.NO_DESCRIPTION},month:{defalutValue:1,description:QQWB._static.NO_DESCRIPTION},day:{defalutValue:86,description:QQWB._static.NO_DESCRIPTION},countrycode:{defalutValue:34,description:QQWB._static.NO_DESCRIPTION},provincecode:{defalutValue:"0755",description:QQWB._static.NO_DESCRIPTION},citycode:{defalutValue:"i am ok.",description:QQWB._static.NO_DESCRIPTION},introduction:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/user/update_head":{category:"账户相关",description:"更新个人资料头像",supportMethod:"post",supportParams:{pic:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/user/other_info":{category:"账户相关",description:"获取其他人资料",supportMethod:"get",supportParams:{name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/user/infos":{category:"账户相关",description:"多用户信息",supportMethod:"post",supportParams:{names:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/user/verify":{category:"账户相关",description:"验证账户是否合法（是否注册微博）",supportMethod:"post",supportParams:{name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/fanslist":{category:"关系链相关",description:"我的听众列表",supportMethod:"get",supportParams:{reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},startindex:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/idollist":{category:"关系链相关",description:"我收听的人列表",supportMethod:"get",supportParams:{reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},startindex:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/blacklist":{category:"关系链相关",description:"黑名单列表",supportMethod:"get",supportParams:{reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},startindex:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/speciallist":{category:"关系链相关",description:"特别收听列表",supportMethod:"get",supportParams:{reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},startindex:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/add":{category:"关系链相关",description:"收听某个用户",supportMethod:"post",supportParams:{name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/del":{category:"关系链相关",description:"取消收听某个用户",supportMethod:"post",supportParams:{name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/addspecial":{category:"关系链相关",description:"特别收听某个用户",supportMethod:"post",supportParams:{name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/delspecial":{category:"关系链相关",description:"取消特别收听某个用户",supportMethod:"post",supportParams:{name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/addblacklist":{category:"关系链相关",description:"添加某个用户到黑名单",supportMethod:"post",supportParams:{name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/delblacklist":{category:"关系链相关",description:"从黑名单中删除某个用户",supportMethod:"post",supportParams:{name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/check":{category:"关系链相关",description:"检查是否我的听众或收听的人",supportMethod:"get",supportParams:{names:{defalutValue:2,description:QQWB._static.NO_DESCRIPTION},flag:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/user_fanslist":{category:"关系链相关",description:"其他账户听众列表",supportMethod:"get",supportParams:{reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},startindex:{defalutValue:"t",description:QQWB._static.NO_DESCRIPTION},name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/user_idollist":{category:"关系链相关",description:"其他账户收听的人列表",supportMethod:"get",supportParams:{reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},startindex:{defalutValue:"t",description:QQWB._static.NO_DESCRIPTION},name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/user_speciallist":{category:"关系链相关",description:"其他账户特别收听的人列表",supportMethod:"get",supportParams:{reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},startindex:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/fanslist_s":{category:"关系链相关",description:"多听众列表",supportMethod:"get",supportParams:{reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},startindex:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/friends/idollist_s":{category:"关系链相关",description:"多收听人列表",supportMethod:"get",supportParams:{reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},startindex:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/private/add":{category:"私信相关",description:"发私信",supportMethod:"post",supportParams:{content:{defalutValue:"127.0.0.1",description:QQWB._static.NO_DESCRIPTION},clientip:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},jing:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},wei:{defalutValue:"t",description:QQWB._static.NO_DESCRIPTION},name:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/private/del":{category:"私信相关",description:"删除一条私信",supportMethod:"post",supportParams:{id:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/private/recv":{category:"私信相关",description:"收件箱",supportMethod:"get",supportParams:{pageflag:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/private/send":{category:"私信相关",description:"发件箱",supportMethod:"get",supportParams:{pageflag:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/search/user":{category:"搜索相关",description:"搜索用户",supportMethod:"get",supportParams:{keyword:{defalutValue:10,description:QQWB._static.NO_DESCRIPTION},pagesize:{defalutValue:1,description:QQWB._static.NO_DESCRIPTION},page:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/search/t":{category:"搜索相关",description:"搜索微博",supportMethod:"get",supportParams:{keyword:{defalutValue:10,description:QQWB._static.NO_DESCRIPTION},pagesize:{defalutValue:1,description:QQWB._static.NO_DESCRIPTION},page:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/search/userbytag":{category:"搜索相关",description:"通过标签搜索用户",supportMethod:"get",supportParams:{keyword:{defalutValue:10,description:QQWB._static.NO_DESCRIPTION},pagesize:{defalutValue:1,description:QQWB._static.NO_DESCRIPTION},page:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/trends/ht":{category:"热度趋势",description:"话题热榜",supportMethod:"get",supportParams:{type:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pos:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/trends/t":{category:"热度趋势",description:"热门转播",supportMethod:"get",supportParams:{reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pos:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/info/update":{category:"查看数据",description:"更新条数",supportMethod:"get",supportParams:{op:{defalutValue:9,description:QQWB._static.NO_DESCRIPTION},type:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/fav/addt":{category:"数据收藏",description:"收藏一条微博",supportMethod:"post",supportParams:{id:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/fav/delt":{category:"数据收藏",description:"取消收藏一条微博",supportMethod:"post",supportParams:{id:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/fav/list_t":{category:"数据收藏",description:"收藏的微博列表",supportMethod:"get",supportParams:{pageflag:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},nexttime:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},prevtime:{defalutValue:20,description:QQWB._static.NO_DESCRIPTION},reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/fav/addht":{category:"数据收藏",description:"订阅话题",supportMethod:"post",supportParams:{id:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/fav/delht":{category:"数据收藏",description:"取消收藏话题",supportMethod:"post",supportParams:{id:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/fav/list_ht":{category:"数据收藏",description:"获取已订阅话题列表",supportMethod:"get",supportParams:{reqnum:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pageflag:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},pagetime:{defalutValue:0,description:QQWB._static.NO_DESCRIPTION},lastid:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/ht/ids":{category:"话题相关",description:"根据话题名称查询话题ID",supportMethod:"get",supportParams:{httexts:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/ht/info":{category:"话题相关",description:"根据话题ID获取话题相关微博",supportMethod:"get",supportParams:{ids:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/tag/add":{category:"标签相关",description:"添加标签",supportMethod:"post",supportParams:{tag:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/tag/del":{category:"标签相关",description:"删除标签",supportMethod:"post",supportParams:{tagid:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/other/kownperson":{category:"其他",description:"我可能认识的人",supportMethod:"get",supportParams:{ip:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},country_code:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},province_code:{defalutValue:"",description:QQWB._static.NO_DESCRIPTION},city_code:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/other/kownperson":{category:"其他",description:"可能认识的人",supportMethod:"get"},"/other/shorturl":{category:"其他",description:"短URL转长URL",supportMethod:"get",supportParams:{url:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}},"/other/get_emtions":{category:"其他",description:"获取表情接口",supportMethod:"get",supportParams:{type:{defalutValue:QQWB._static.NO_DEFAULT_VALUE,description:QQWB._static.NO_DESCRIPTION}}}},getDescriptor:function(a){return this.apis[a]},isProvide:function(a){return!!this.getDescriptor(a)},describe:function(a){var b=this.getDescriptor(a);return b?b.category+">"+b.description:""},compat:function(a){return!QQWB.String.startsWith(a,"/")&&(a="/"+a),a.toLowerCase()}}),QQWB.extend("queryString",{encode:function(a,b,c){var d=/%20/g,e=b||"&",f=c||encodeURIComponent,g=[];for(var h in a)if(a.hasOwnProperty(h)){var i=a[h];i!==null&&typeof i!="undefined"&&g.push(f(h).replace(d,"+")+"="+f(i).replace(d,"+"))}return g.sort(),g.join(e)},decode:function(a,b,c){var d=c||decodeURIComponent,e=b||"&",f=a.split(e),g={},h;for(var i=0,j=f.length;i<j;i++)h=f[i].split("=",2),h&&h[0]&&(g[d(h[0])]=d(h[1]));return g}}),QQWB.extend("Function",{isFunction:function(a){return typeof a=="function"}}),QQWB.extend("Array",{isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"},inArray:function(a,b){for(var c=0,d=a.length;c<d;c++)if(b===a[c])return!0;return!1},fromString:function(a,b,c){return QQWB.String.isString(a)?(b=b||"",c?a.split(b,c):a.split(b)):[]},fromArguments
:function(a,b){return typeof a!="object"?[]:b?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a)},toArray:function(a){return typeof a=="string"?a.split(""):typeof a=="object"?Array.prototype.slice.call(a,0):this.toArray(a.toString())},each:function(a,b){for(var c=0,d=a.length;c<d;c++)if(!1===b(c,a[c]))break}}),QQWB.extend("deferred",{_promiseMethods:"done fail isResolved isRejected promise then always success error complete whatever".split(" "),_deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,f,g;b&&(g=b,b=0);for(var h=0,i=c.length;h<i;h++)f=c[h],QQWB.Array.isArray(f)?e.done.apply(e,f):QQWB.Function.isFunction(f)&&a.push(f);g&&e.resolveWith(g[0],g[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){return e.resolveWith(this,arguments),this},isResolved:function(){return!!c||!!b},cancel:function(){return d=1,a=[],this}};return e},deferred:function(a){var b,c=QQWB.deferred._deferred(),d=QQWB.deferred._deferred();return QQWB.extend(c,{fail:d.done,then:function(a,b){return c.done(a).fail(b),this},always:function(){return c.done.apply(c,arguments).fail.apply(this,arguments)},rejectWith:d.resolveWith,reject:d.resolve,isRejected:d.isResolved,promise:function(a){if(a==null){if(b)return b;b=a={}}var d=QQWB.deferred._promiseMethods.length;while(d--)a[QQWB.deferred._promiseMethods[d]]=c[QQWB.deferred._promiseMethods[d]];return a}}),c.success=c.done,c.error=c.fail,c.complete=c.whatever=c.always,c.done(d.cancel).fail(c.cancel),delete c.cancel,a&&a.call(c,c),c},when:function(a){function f(a){return function(c){b[a]=arguments.length>1?QQWB.Array.fromArguments(arguments):c,--d||e.resolveWith(e,QQWB.Array.fromArguments(b))}}var b=arguments,c=b.length,d=c,e=c<=1&&a&&QQWB.Function.isFunction(a.promise)?a:QQWB.deferred.deferred();if(c>1)for(var g=0;g<c;g++)b[g]&&QQWB.Function.isFunction(b[g].promise)?b[g].promise().then(f(g),e.reject):--d,d||e.resolveWith(e,b);else e!==a&&e.resolveWith(e,c?[a]:[]);return e.promise()}}),QQWB._alias(["task","when"],QQWB.deferred.when);var JSON;JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),QQWB.extend("JSON",{fromString:function(a){if(!a||!QQWB.String.isString(a))return{};a=a.replace(/^\s+/,"").replace(/\s+$/,"");if(window.JSON&&window.JSON.parse)a=window.JSON.parse(a);else if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))a=(new Function("return "+data))();else throw new SyntaxError("Invalid JSON: "+a);return a},toString:function(a){return a==null?"":window.JSON.stringify(a)},stringify:function(a){return QQWB.JSON.toString(a)},parse:function(a){return a==null?{}:window.JSON.parse(a)}},!0),QQWB.extend("io",{_IOScript:function(a){var b,c=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(d){b=document.createElement("script"),b.async="async",a.charset&&(b.charset=a.charset),b.src=a.url,b.onload=b.onreadystatechange=function(a,e){if(e||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,c&&b.parentNode&&c.removeChild(b),b=null,!e&&d&&d.apply(QQWB,[200,"success"]),e&&d&&d.apply(QQWB,[-1,"aborted"])},b.onerror=function(a){d&&d.apply(QQWB,[404,a])},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(0,1)}}},_IOAjax:function(a){var b,a=a||{},c=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");return a.async||(a.async="async"),{send:function(d){a.username?c.open(a.type,a.url,a.async,a.username,a.password):c.open(a.type,a.url,a.async);try{a.type=="POST"&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.setRequestHeader("X-Requested-With","XMLHttpRequest")}catch(e){}c.send(a.data||null),b=function(e,f){var g,h,i,j,k,l;try{if(b&&(f||c.readyState===4)){b=null;if(f)c.readyState!==4&&c.abort();else{g=c.status,i=c.getAllResponseHeaders(),j={},l=c.responseXML,l&&l.documentElement&&(j.xml=l),j.text=c.responseText;try{h=c.statusText}catch(m){h=""}g===1223&&(g=204),a.dataType.toLowerCase()=="json"?k=QQWB.JSON.fromString(j.text):a.dataType.toLowerCase()=="xml"?k=j.xml:k=j.text}}}catch(n){f||d(-1,n)}k&&d(g,h,k,i,a.dataType)},!a.async||c.readyState===4?b():c.onreadystatechange=b},abort:function(){b&&b(0,1)}}},_IOFlash:function(a){var b,c,a=a||{};return{send:function(d){c=1,b=function(c,e){var f,g,h,i,j,k,l=4;try{if(b&&(e||l==4)){b=null;if(e)d(-1,"request has aborted");else{var m=/complete/i.test(c.type);f=m?200:204,g=m?"ok":c.type,h="",i={},i.text=c.target.data,a.dataType.toLowerCase()=="json"?j=QQWB.JSON.fromString(i.text):a.dataType.toLowerCase()=="xml"?j=QQWB.XML.fromString(i.text):j=i.text}j&&d(f,g,j,h)}}catch(n){e||d(-1,n+"")}},window.onFlashRequestComplete_8df046||(window.onFlashRequestComplete_8df046=function(a){onFlashRequestComplete_8df046.callbacks.shift()(a)},window.onFlashRequestComplete_8df046.callbacks=[]),window.onFlashRequestComplete_8df046.callbacks.push(b),QQWBFlashTransport&&QQWBFlashTransport.httpRequest?QQWBFlashTransport.httpRequest(a.url,a.data,a.type):QQWB.log.critical("flash transportation object error"+QQWBFlashTransportName)},abort:function(){b&&b(0,1)}}},_apiAjax:function(a,b,c,d){var e={type:d.toUpperCase(),url:QQWB._domain.api+a,data:QQWB.queryString.encode(b),dataType:c};return e.type=="GET"&&(e.url+=e.data?"?"+e.data:"",delete e.data),QQWB.io.ajax(e)},_apiFlashAjax:function(a,b,c,d){var e={type:d.toUpperCase(),url:QQWB._domain.api+a,data:QQWB.queryString.encode(b),dataType:c};return e.type=="GET"&&(e.url+=e.data?"?"+e.data:"",delete e.data),QQWB.io.flashAjax(e)},flashAjax:function(a){var b=QQWB.deferred.deferred(),c={type:"get",dataType:"json"};return QQWB.extend(c,a,!0),QQWB.io._IOFlash(c).send(function(a,c,d,e){if(a!==200)b.reject(a,c);else if(e&&QQWB._apiProvider.apiError.httpHeaderFlag.test(e)){var f=e.match(QQWB._apiProvider.apiError.httpHeaderFlag)[1];b.reject(parseInt(f,10),QQWB._apiProvider.apiError[f])}else b.resolve(a,c,d,e)}),b.promise()},ajax:function(a){var b=QQWB.deferred.deferred(),c={type:"get",dataType:"json"};return QQWB.extend(c,a,!0),QQWB.io._IOAjax(c).send(function(a,c,d,e,f){if(a!==200)b.reject(a,c);else if(e&&QQWB._apiProvider.apiError.httpHeaderFlag.test(e)){var g=e.match(QQWB._apiProvider.apiError.httpHeaderFlag)[1];b.reject(parseInt(g,10),QQWB._apiProvider.apiError[g])}else b.resolve(a,c,d,e,f)}),b.promise()},ajax2:function(a){var b=QQWB.deferred.deferred(),c={type:"get",dataType:"json"};return QQWB.extend(c,a,!0),QQWB.io._IOAjax(c).send(function(a,c,d,e,f){a!==200?b.reject(a,c):b.resolve(d)}),b.promise()},script:function(a,b){var b=b||"utf-8",c=QQWB.deferred.deferred();return QQWB.io._IOScript({charset:b,url:a}).send(function(a,b){a!==200?c.reject(a,b):c.resolve(a,b)}),c.promise()},jsonp:function(a){var b=QQWB.deferred.deferred(),c="callback",d="jsonp_",e=d+QQWB.uid(),f=window.callbackName,g={dataType:"text",charset:"utf-8",url:""};return QQWB.extend(g,a,!0),g.data&&(g.url+="?"+g.data+"&"+c+"="+e),window[e]=function(a){var c=a;g.dataType.toLowerCase()==="json"?c=QQWB.JSON.fromString(a):g.dataType.toLowerCase()==="xml"&&(c=QQWB.XML.fromString(a)),b.resolve(c),window[e]=f},QQWB.io._IOScript(g).send(function(a,c){a!==200&&b.reject(a,c)}),b.promise()}}),QQWB._alias("ajax",QQWB.io.ajax2),QQWB._alias("jsonp",QQWB.io.jsonp),QQWB._alias("script",QQWB.io.script),QQWB.extend("_token",{setAccessToken:function(a,b,c,d){var e=this.getTokenUser(!0);return QQWB.cookie.set(QQWB._cookie.names.accessToken,[a,QQWB.time.now()+b*1e3,c||e&&e.name||"",d||e&&e.nick||""].join("|"),31536e3,QQWB._cookie.path,QQWB._cookie.domain),QQWB},getAccessToken:function(a){var b=QQWB.cookie.get(QQWB._cookie.names.accessToken);if(b){b=b.split("|",2);if(a||parseInt(b[1],10)>QQWB.time.now())return b[0]}},getTokenUser:function(a){var b=QQWB.cookie.get(QQWB._cookie.names.accessToken);if(b){b=b.split("|",4);if(a||parseInt(b[1],10)>QQWB.time.now())return{name:b[2],nick:b[3]}}},clearAccessToken:function(){return QQWB.cookie.del(QQWB._cookie.names.accessToken,QQWB._cookie.path,QQWB._cookie.domain),QQWB},setRefreshToken:function(a){return QQWB.cookie.set(QQWB._cookie.names.refreshToken,a,31536e3,QQWB._cookie.path,QQWB._cookie.domain),QQWB},getRefreshToken:function(){return QQWB.cookie.get(QQWB._cookie.names.refreshToken)},clearRefreshToken:function(){return QQWB.cookie.del(QQWB._cookie.names.refreshToken,QQWB._cookie.path,QQWB._cookie.domain),QQWB},exchangeForToken:function(a){return QQWB.io.jsonp({url:QQWB._domain.exchange,data:QQWB.queryString.encode({response_type:"token",client_id:QQWB._appkey,scope:"all",state:"1",refresh_token:this.getRefreshToken(),access_token:this.getAccessToken(!0)})}).success(function(a){var b=a;QQWB.String.isString(a)&&(a=QQWB.queryString.decode(a)),a.access_token?(!a.expires_in&&QQWB.log.error("token expires_in not retrieved"),!a.wb_name&&QQWB.log.warning("weibo username not retrieved, will not update username"),!a.wb_nick&&QQWB.log.warning("weibo usernick not retrieved, will not update usernick"),QQWB._token.setAccessToken(a.access_token,parseInt(a.expires_in,10),a.wb_name,a.wb_nick),a.refresh_token?QQWB._token.setRefreshToken(a.refresh_token):QQWB.log.error("refresh token not retrieved"),QQWB.log.info("exchange token succeed")):a.error?QQWB.log.error("exchange token error "+a.error):QQWB.log.error("unexpected result returned from server "+b+" while exchanging for new access token")}).error(function(a,b){a===404?QQWB.log.error("exchange token has failed, script not found"):QQWB.log.error("exchange token has failed, "+b)}).complete(function(b,c,d){a&&a.apply(QQWB,[b,c,d])}),QQWB},getNewAccessToken:function(a){return QQWB.io.jsonp({url:QQWB._domain.query,data:QQWB.queryString.encode({response_type:"token",client_id:QQWB._appkey,scope:"all",state:"1"})}).success(function(a){var b=a;QQWB.String.isString(a)&&(a=QQWB.queryString.decode(a)),a.access_token?(!a.expires_in&&QQWB.log.error("token expires_in not retrieved"),!a.wb_name&&QQWB.log.warning("weibo username not retrieved"),!a.wb_nick&&QQWB.log.warning("weibo usernick not retrieved"),QQWB._token.setAccessToken(a.access_token,parseInt(a.expires_in,10),a.wb_name,a.wb_nick),a.refresh_token?QQWB._token.setRefreshToken(a.refresh_token):QQWB.log.error("refresh token not retrieved"),QQWB.log.info("retrieve new access token succeed")):a.error?QQWB.log.error("retrieve new access token error "+a.error):QQWB.log.error("unexpected result returned from server "+b+" while retrieving new access token")}).error(function(a,b){a===404?QQWB.log.error("get token has failed, script not found"):QQWB.log.error("get token failed, "+b)}).complete(function(b,c,d){a&&a.apply(QQWB,[b,c,d])}),QQWB},resolveResponse:function(a,b){var c,d=(b||window).QQWB,e=d.queryString.decode(a);e.access_token?(d._token.setAccessToken(e.access_token,parseInt(e.expires_in,10),e.wb_name,e.wb_nick),e.refresh_token?d._token.setRefreshToken(e.refresh_token):d.log.error("refresh token not retrieved"),c=d.loginStatus(),d.log.info("user "+c.name+" logged in"),d.trigger(d.events.USER_LOGGEDIN_EVENT,c)):e.error?(d.log.error("login error occurred "+e.error),e.message=e.error,d.trigger(d.events.USER_LOGIN_FAILED_EVENT,e)):(d.log.error("unexpected result returned from server "+a),e.message=e.error="server error",d.trigger(d.events.USER_LOGIN_FAILED_EVENT,e))}}),QQWB.extend("_eventProvider",{_getEventsMap:function(){return this._eventsMap||(this._eventsMap={}),this._eventsMap},bind:function(a,b){var c=this._getEventsMap();c[a]?QQWB.Array.inArray(c[a],b)||c[a].push(b):c[a]=[b]},unbind:function(a,b){var c=this._getEventsMap()[a];if(c)if(b)for(var d=0,e=c.length;d<e;d++)b===c[d]&&(c[d]=null);else delete this._getEventsMap()[a]},trigger:function(a,b){var c=this._getEventsMap()[a];if(c)for(var d=0,e=c.length;d<e;d++){var f=c[d];f&&f.call(QQWB,b)}}}),QQWB.extend("",{bind:function(a,b){return a=a.toLowerCase(),this._eventProvider.bind(a,b),this},unbind:function(a,b){return a=a.toLowerCase(),this._eventProvider.unbind(a,b),this},trigger:function(a,b){return a=a.toLowerCase(),this._eventProvider.trigger(a,b),this}}),QQWB.extend("events",{USER_LOGGEDIN_EVENT:"UserLoggedIn",USER_LOGIN_FAILED_EVENT:"UserLoginFailed",USER_LOGGEDOUT_EVENT:"UserLoggedOut",TOKEN_READY_EVENT:"tokenReady",DOCUMENT_READY_EVENT:"documentReady",EVERYTHING_READY_EVENT:"everythingReady"}),QQWB.extend("",{login:function(a,b){this._inited||this.log.critical("Library not initialized, call T.init() to initialize");var c=this.loginStatus();a&&this.bind(this.events.USER_LOGGEDIN_EVENT,a),b&&this.bind(this.events.USER_LOGIN_FAILED_EVENT,b);if(c)a&&a.call(this,c),this.trigger(this.events.USER_LOGGEDIN_EVENT,c);else{var d={x:window.screenX||window.screenLeft,y:window.screenY||window.screenTop,width:window.outerWidth||document.documentElement.clientWidth,height:window.outerHeight||document.documentElement.clientHeight},e={width:500,height:300,authQuery:function(){return QQWB.queryString.encode({response_type:"token",client_id:QQWB._appkey,redirect_uri:QQWB._domain.clientproxy,referer:document.location.href,scope:"all"})},x:function(){return parseInt(d.x+(d.width-this.width)/2,10)},y:function(){return parseInt(d.y+(d.height-this.height)/2,10)},popup:function(){return this.contentWindow=window.open(QQWB._domain.auth+"?"+this.authQuery(),"",["height=",this.height,", width=",this.width,", top=",this.y(),", left=",this.x(),", toobar=","no",", menubar=","no",", scrollbars=","no",", resizable=","yes",", location=","yes",", status=","no"].join("")),this},focus:function(){return this.contentWindow&&this.contentWindow.focus&&this.contentWindow.focus(),this}};e.popup().focus(),this.browser.msie?function(){var a;if(e.contentWindow.closed){a="error=access_denied",QQWB._token.resolveResponse(a);return}try{a=e.contentWindow.location.hash.split("#").pop(),QQWB._token.resolveResponse(a),e.contentWindow.close()}catch(b){setTimeout(arguments.callee,0)}}():(QQWB._startTrackingAuthWindowStatus(),function(){var a;if(!QQWB._isTrackingAuthWindowStatus())return;if(e.contentWindow.closed){a="error=access_denied",QQWB._token.resolveResponse(a);return}setTimeout(arguments.callee,0)}())}return this},logout:function(a){var b=this.loginStatus();return QQWB.log.info("logging out user..."),b?(this._token.clearAccessToken(),this._token.clearRefreshToken(),this.log.info(b.name+" has logged out successfully")):this.log.warning("oops, user not logged in"),a&&a.call(this),this.trigger(this.events.USER_LOGGEDOUT_EVENT),this},loginStatus:function(a){var b,c=this._token.getAccessToken(),d=this._token.getTokenUser();return c&&(b={access_token:c,name:d.name,nick:d.nick}),a&&a.call(this,b),b},_isTrackingAuthWindowStatus:function(){return!!this._trackAuthWindowStatus},_startTrackingAuthWindowStatus:function(){this._trackAuthWindowStatus=!0},_stopTrackingAuthWindowStatus:function(){this._trackAuthWindowStatus=!1}}),QQWB.provide("api",function(a,b,c,d,e){a=this._apiProvider.compat(a),b=b||{},c=(c||"json").toLowerCase(),d=d||"GET";var f,g,h=c,i={json:!0,xml:!0},j=QQWB.deferred.deferred();h in i||(h="json"),b.access_token=QQWB._token.getAccessToken(),b.version="2.0",b.format=h,f=j.promise(),e&&QQWB.Array.inArray([QQWB._solution.HTML5_SOLUTION,QQWB._solution.FLASH_SOLUTION,QQWB._solution.SILVER_LIGHT_SOLUTION],e)?(QQWB.log.warning("forced to use solution "+e),QQWB._solution[e]||(QQWB.log.warning("forced to use solution "+e+", this solution is not inited, initialzing..."),QQWB._solution.initSolution[e]),g=QQWB._solution[e]):g=QQWB.browser.feature.postmessage&&QQWB._solution[QQWB._solution.HTML5_SOLUTION]||QQWB.browser.feature.flash&&QQWB._solution[QQWB._solution.FLASH_SOLUTION]||QQWB.browser.feature.silverlight&&QQWB._solution[QQWB._solution.SILVER_LIGHT_SOLUTION];if(!g||g.readyState===2)return QQWB.log.critical("solution error"),j.reject(-1,"solution error"),f;if(g.readyState===0)return QQWB.log.warning("solution is not ready, your api call request has been cached, will invoke immediately when solution is ready"),g.promise.done(function(){QQWB.log.info('invoking cached api call "QQWB.api( '+[a,b,c,d].join(",")+' )"...'),QQWB.api(a,b,c,d).success(function(){j.resolveWith(j,QQWB.Array.fromArguments(arguments))}).error(function(){j.rejectWith(j,QQWB.Array.fromArguments(arguments))})}).fail(function(){QQWB.log.error("can't invoking cached api call \"QQWB.api( "+[a,b,c,d].join(",")+' )"'),j.rejectWith(j,QQWB.Array.fromArguments(arguments))}),f;if(!QQWB.loginStatus())return QQWB.log.error("failed to make api call, not logged in"),j.reject(-1,"not login"),f;QQWB.api.id||QQWB.extend(QQWB.api,{id:0,total:function(){return QQWB.api.id}}),QQWB.api.id++,QQWB.log.info("["+QQWB.api.id+'] requesting data "'+QQWB._apiProvider.describe(a)+'" from server...');if(g===QQWB._solution[QQWB._solution.HTML5_SOLUTION]){var k=document.getElementById(g.id);if(!k)QQWB.log.critical("server proxy not found"),j.reject(-1,"server proxy not found");else if(k.src!==QQWB._domain.serverproxy)QQWB.log.critical("server proxy is not valid, src attribute has unexpected value"),j.reject(-1,"server proxy not valid");else{QQWB.api._deferredCollection||QQWB.extend(QQWB.api,{_deferredCollection:{},deferredAt:function(a){if(this._deferredCollection[a])return this._deferredCollection[a];QQWB.log.warning("get deferred object has failed, that object does not exist at index "+a)},uncollect:function(a){this._deferredCollection[a]?delete this._deferredCollection[a]:QQWB.log.warning("uncollect deferred object has failed, that object does not exist at index "+a)},collect:function(a){if(a.promise)return this._deferredCollection[this.id]=a,this.id;QQWB.log.warning("collect a non-deferred object is illegal")}}),QQWB.api.messageHandler||(QQWB.provide("api.messageHandler",function(a){if(QQWB._domain.serverproxy.indexOf(a.origin)!==0)QQWB.log.warning("unexpected message arrived from "+a.origin+" with data "+a.data);else{var b=QQWB.JSON.fromString(a.data),c=b.id,d=QQWB.api.deferredAt(c),e=b.data;d?(e[0]!==200?d.reject.apply(d,e):(e[4]=="xmltext"&&(e[2]=QQWB.XML.fromString(e[2])),d.resolve(e[2])),QQWB.api.uncollect(c)):QQWB.log.warning("related deferred object not found, it shouldn't happen")}}),window.addEventListener?window.addEventListener("message",QQWB.api.messageHandler,!1):window.attachEvent&&window.attachEvent("onmessage",QQWB.api.messageHandler));try{var l=QQWB.api.collect(j);setTimeout(function(){k.contentWindow.postMessage(QQWB.JSON.stringify({id:l,data:[a,b,c,d]}),QQWB._domain.serverproxy)},0)}catch(m){QQWB.log.critical("post message to server proxy has failed, "+m),j.reject(-1,m)}}}else g===QQWB._solution[QQWB._solution.FLASH_SOLUTION]&&QQWB.io._apiFlashAjax(a,b,c,d).complete(function(){var a=QQWB.Array.fromArguments(arguments);a[0]!==200?j.reject.apply(j,a):j.resolve(a[2])});return function(){var a=QQWB.api.id;f.complete(function(){QQWB.log.info("*["+a+"] done"),a=null})}(),f}),QQWB.provide("man",function(a){return a=this._apiProvider.compat(a),this._apiProvider.getDescriptor(a)?QQWB.JSON.toString(this._apiProvider.getDescriptor(a)):"no such api"}),QQWB.extend("dom",{create:function(a,b){var c=document.createElement(a+"");if(b&&c)for(attr in b)b.hasOwnProperty(attr)&&(c[attr]=b[attr]);return c},createHidden:function(a,b,c){a=a||"div";var d=this.create(a,b);return d.width=d.height=0,d.style.width=d.style.height=0,d.style.position="absolute",d.style.top="-9999px",c?-1:d.style.display="none",d},append:function(a,b){return b=b||document.body,a&&a.nodeType&&b.appendChild(a),this},html:function(a,b){return a&&a.nodeType&&b&&(a.innerHTML=b),this},appendHidden:function(a,b,c){var d=this.createHidden(null,b,c);return this.html(d,a),this.append(d)},remove:function(a){return a&&a.nodeType&&a.parentNode&&a.parentNode.removeChild(a),this}}),function(){function j(a){a=a.toLowerCase();var b=e.exec(a)||d.exec(a)||c.exec(a)||a.indexOf("compatible")<0&&f.exec(a)||[];return{browser:b[1]||"unknown",version:b[2]||"0"}}function k(){for(var a in i)i.hasOwnProperty(a)&&i[a]()&&(g[a]=!0)}var a,b=navigator.userAgent,c=/(msie) ([\w.]+)/,d=/(opera)(?:.*version)?[ \/]([\w.]+)/,e=/(webkit)[ \/]([\w.]+)/,f=/(mozilla)(?:.*? rv:([\w.]+))?/,g={},h=["Webkit","Moz","O","ms","khtml"],i={cookie:function(){var a=navigator.cookieEnabled;if(a&&QQWB.browser.webkit){var b="COOKIE_TEST_"+QQWB.uid();document.cookie=b+"="+1+"; domain=; path=;",document.cookie.indexOf(b)<0?a=!1:document.cookie=b+"="+"; expires="+(new Date(1970,1,1)).toUTCString()+"; domain=; path=;"}return!a&&QQWB.log.critical("Your browser doesn't support cookie or cookie isn't enabled"),a},flash:function(){if(typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]=="object"){var a=navigator.plugins["Shockwave Flash"].description,b=typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin;return a&&b}if(typeof window.ActiveXObject!="undefined")try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(c)return c.getVariable("$version")}catch(d){}},userdata:function(){return QQWB.browser.msie},postmessage:function(){return!!window.postMessage&&(QQWB.browser.msie&&parseInt(QQWB.browser.version,10)<8?!1:!0)},canvas:function(){var a=document.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},webgl:function(){return!!window.WebGLRenderingContext},geolocation:function(){return!!navigator.geolocation},websqldatabase:function(){return!!window.openDatabase},indexeddb:function(){for(var a=0,b=h.length;a<b;a++)if(window[h[a].toLowerCase()+"IndexedDB"])return!0;return!!window.indexedDB},websocket:function(){for(var a=0,b=h.length;a<b;a++)if(window[h[a].toLowerCase()+"WebSocket"])return!0;return!!window.WebSocket},localstorage:function(){return window.localStorage&&localStorage.getItem},sessionstorage:function(){return window.sessionStorage&&sessionStorage.getItem},webworker:function(){return!!window.Worker},applicationcache:function(){return!!window.applicationCache}};a=j(b),QQWB.extend("browser",{version:a.version}),QQWB.browser[a.browser]=!0,k(),QQWB.extend("browser.feature",g)}(),QQWB.extend("flash",{NO_CACHE:1,load:function(a,b,c){this.loadedSwfs||(this.loadedSwfs=[]);if(QQWB.Array.inArray(this.loadedSwfs,a)){QQWB.log.warning(a+"is already loaded");return}c===this.NO_CACHE&&(a+="?"+QQWB.uid());var d="movieContainer_"+QQWB.uid(),e="movie_"+QQWB.uid(),f="onFlashReady_a1f5b4ce",g=window[f];return window[f]=function(){b&&b(e),window[f]=g,g=null,b&&(b=null),e=null},QQWB.dom.appendHidden(["<object",'type="application/x-shockwave-flash"','id="'+e+'"',QQWB.browser.msie?'name="'+e+'"':"",QQWB.browser.msie?'data="'+a+'"':"",QQWB.browser.msie?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':"",'allowscriptaccess="always">','<param name="movie" value="'+a+'"></param>','<param name="allowscriptaccess" value="always"></param>',"</object>"].join(" "),{id:d},!0),document.getElementById(d)},getSWFObjectByName:function(a){return QQWB.browser.msie?window[a]:document[a].length?document[a][1]:document[a]}}),QQWB.extend("_solution",{HTML5_SOLUTION:"html5",FLASH_SOLUTION:"flash",SILVER_LIGHT_SOLUTION:"silverlight",initSolution:function(a){var b,c=QQWB.deferred.deferred();!this[a]&&QQWB.Array.inArray([this.HTML5_SOLUTION,this.FLASH_SOLUTION,this.SILVER_LIGHT_SOLUTION],a)&&(this[a]={},this[a].readyState=0,this[a].id="solution_"+QQWB.uid(),this[a].deferred=QQWB.deferred.deferred(),this[a].promise=this[a].deferred.promise());if(this[a]&&this[a].readyState!==0)this[a].deferred.success(function(){c.resolve(QQWB.Array.fromArguments(arguments))}).fail(function(){c.reject(QQWB.Array.fromArguments(arguments))});else switch(a){case this.HTML5_SOLUTION:if(QQWB.browser.feature.postmessage){b=this[this.HTML5_SOLUTION];var d=function(a){QQWB._domain.serverproxy.indexOf(a.origin)!==0?QQWB.log.warning("unexpected message arrived from "+a.origin+" with data "+a.data):a.data==="success"?(QQWB.log.info("html5 solution was successfully initialized"),b.readyState=1,b.deferred.resolve()):QQWB.log.info("unexpected solution signal "+a.data),window.addEventListener?window.removeEventListener("message",d,!1):window.attachEvent&&window.detachEvent("onmessage",d),d=null};window.addEventListener?window.addEventListener("message",d,!1):window.attachEvent&&window.attachEvent("onmessage",d),QQWB.everythingReady(function(){QQWB.log.info("init html5 solution..."),serverframe=QQWB.dom.createHidden("iframe",{id:b.id,src:QQWB._domain.serverproxy}),QQWB.dom.append(serverframe),serverframe.onload=function(a){setTimeout(function(){b.readyState!==1&&(QQWB.log.error("html5 solution initialition has failed, server proxy frame encountered error"),b.readyState=2,b.deferred.reject(-1,"server proxy frame not working"))},1e3)}})}else QQWB.log.error("can't init solution \""+a)+"\",browser doesn't support postmessage",c.reject("browser not supported");break;case this.FLASH_SOLUTION:QQWB.browser.feature.flash?(b=this[this.FLASH_SOLUTION],QQWB.everythingReady(function(){QQWB.log.info("init flash solution...");var a,c=1e4,d=QQWB.flash.load(QQWB._domain.flashproxy,function(c){QQWB.log.info("flash solution initlized successfully"),b.readyState=1,window.QQWBFlashTransport=QQWB.flash.getSWFObjectByName(c),a&&clearTimeout(a),b.deferred.resolve()},QQWB.flash.NO_CACHE);a=setTimeout(function(){b.deferred.isResolved()||(b.readyState=2,b.deferred.reject(-1,"encounter error while loading proxy swf, need newer flash player"),QQWB.dom.remove(d))},c)})):(QQWB.log.error("can't init solution \""+a)+"\",browser doesn't support flash or flash is disabled",c.reject("browser not supported"));break;case this.SILVER_LIGHT_SOLUTION:QQWB.browser.feature.silverlight?(-2,QQWB.log.error("sorry, silverlight solution is not implemented")):(QQWB.log.error("can't init solution \""+a)+"\",browser doesn't support silverlight or silverlight is disabled",c.reject("browser not supported"));break;default:QQWB.log.error("can't init solution \""+a)+'",not supported',c.reject("solution "+a+" not supported")}return c.promise()}}),QQWB.extend("door",{doors:0,door:function(a,b){var c=0;return this.doors++,{lock:function(){return c++,a&&a.call(QQWB),this},unlock:function(){return c--,c=Math.max(0,c),b&&b.call(QQWB),this},isOpen:function(){return c===0}}},count:function(){return this.doors}}),QQWB.extend("",{init:function(a){if(this._inited===!0)return this.log.warning("already initialized"),this;this.log.info("init signal has arrived");var b=this._token.getAccessToken(),c=this._token.getAccessToken(!0),d=this._token.getRefreshToken(),e=d&&!b&&c,f=!d&&!b,g=a.proxy||document.location.href;return a.appkey&&(this.log.info("client id is "+a.appkey),this.assign("_appkey","APPKEY",a.appkey)),this.log.info("client proxy uri is "+g),this.assign("_domain","CLIENTPROXY_URI",g),(e||f)&&QQWB._tokenReadyDoor.lock(),e?(this.log.info("exchanging refresh token to access token..."),QQWB._token.exchangeForToken(function(a){a.error&&(QQWB.log.warning("exchange token has failed, trying to retrieve a new access_token..."),this._tokenReadyDoor.lock(),QQWB._token.getNewAccessToken(function(){this._tokenReadyDoor.unlock()})),this._tokenReadyDoor.unlock()})):f&&(this.log.info("retrieving new access token..."),QQWB._token.getNewAccessToken(function(){QQWB._tokenReadyDoor.unlock()})),this._inited=!0,QQWB._tokenReadyDoor.unlock(),this},_tokenReadyDoor:QQWB.door.door(function(){this.log.info("tokenReady is locked")},function(){this.log.info("tokenReady is unlocked"),this._tokenReadyDoor.isOpen()&&this.log.info("token is ready")&&this.trigger(this.events.TOKEN_READY_EVENT)}),tokenReady:function(a){return this._tokenReadyDoor.isOpen()?a&&a():this.bind(this.events.TOKEN_READY_EVENT,a),this},_isDocumentReady:!1,_tryToTriggerDocumentReadyEvents:function(){if(this._isDocumentReady)return;try{var a=document.getElementsByTagName("body")[0].appendChild(document.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}this._isDocumentReady=!0,this.log.info("document is ready"),this._everythingReadyDoor.unlock(),this.trigger(this.events.DOCUMENT_READY_EVENT)},documentReady:function(a){this._isDocumentReady?a&&a():(this.bind(this.events.DOCUMENT_READY_EVENT,a),this._tryToTriggerDocumentReadyEvents())},_everythingReadyDoor:QQWB.door.door(function(){this.log.info("everythingReady is locked")},function(){this.log.info("everythingReady is unlocked"),this._everythingReadyDoor.isOpen()&&this.log.info("everything is ready")&&this.trigger(this.events.EVERYTHING_READY_EVENT)}),everythingReady:function(a){return this._everythingReadyDoor.isOpen()?a&&a():this.bind(this.events.EVERYTHING_READY_EVENT,a),this}}),function(){function g(){QQWB.browser.feature.postmessage?QQWB._solution.initSolution(QQWB._solution.HTML5_SOLUTION):QQWB.browser.feature.flash?QQWB._solution.initSolution(QQWB._solution.FLASH_SOLUTION):QQWB.log.error("init solution is called, but no solution for the browser")}var a=window,b=a.opener,c=a.parent,d=!!b,e=a!=c,f=QQWB._domain.serverproxy===a.location.href;QQWB._tokenReadyDoor.lock(),QQWB._everythingReadyDoor.lock(),QQWB._everythingReadyDoor.lock(),QQWB.bind(QQWB.events.TOKEN_READY_EVENT,function(){QQWB._everythingReadyDoor.unlock()});if(d){QQWB.log.info("library booting at popup mode"),b.location.href?QQWB._token.resolveResponse(window.location.hash.split("#").pop(),b):QQWB.log.critical("crossdomain login is not supported currently"),b.QQWB._stopTrackingAuthWindowStatus(),window.close();return}if(e&&f&&QQWB.browser.feature.postmessage){QQWB.log.info("library booting at server proxy mode");var h="*",i=c;i.postMessage("success",h);var j=function(a){var b=QQWB.JSON.fromString(a.data),c=b.id,d=b.data,e=d[0];d[2].toLowerCase()=="xml"&&(d[2]="xmltext"),e?QQWB._apiProvider.isProvide(e)?QQWB.io._apiAjax.apply(this,d).complete(function(){i.postMessage(
QQWB.JSON.toString({id:c,data:QQWB.Array.fromArguments(arguments)}),h)}):(i.postMessage(QQWB.JSON.toString({id:c,data:[-1,'interface "'+e+'" is not supported']}),h),QQWB.log.error('interface "'+e+'" is not allowed to be called')):(i.postMessage(QQWB.JSON.toString({id:c,data:[-1,"interface can not be empty"]}),h),QQWB.log.error("interface is empty"))};a.addEventListener?a.addEventListener("message",j,!1):window.attachEvent&&a.attachEvent("onmessage",j);return}QQWB.log.info("library booting at normal mode"),g()}(),QQWB._isDocumentReady||(window.addEventListener&&document.addEventListener("DOMContentLoaded",function(){QQWB._tryToTriggerDocumentReadyEvents()},!1),window.attachEvent&&(document.attachEvent("onreadystatechange",function(){/complete/.test(document.readyState)&&(document.detachEvent("onreadystatechange",arguments.callee),QQWB._tryToTriggerDocumentReadyEvents())}),window===window.top&&function(){if(QQWB._isDocumentReady)return;try{document.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}QQWB._tryToTriggerDocumentReadyEvents()}()),QQWB.browser.webkit&&function(){if(QQWB._isDocumentReady)return;if(!/load|complete/.test(document.readyState)){setTimeout(arguments.callee,0);return}QQWB._tryToTriggerDocumentReadyEvents()}());if(QQWB.browser.feature.localstorage)QQWB.extend("localStorage",{set:function(a,b,c){a="k"+a;var d=QQWB.time.secondsNow()+(c||7)*24*3600,e={value:b,expire:d};return localStorage[a]=JSON.stringify(e),localStorage[a]},get:function(a,b){a="k"+a;var c=localStorage[a];return c&&(c=JSON.parse(c))&&c.value&&QQWB.time.secondsNow()<c.expire?c.value:b},del:function(a){return a="k"+a,localStorage.removeItem(a),!localStorage[a]}});else if(QQWB.browser.feature.userdata){var userData,storeName="QQWBLocalStore";QQWB.documentReady(function(){userData=document.createElement("input"),userData.type="hidden",userData.style.display="none",userData.addBehavior("#default#userData"),userData.expires=(new Date(QQWB.time.now()+31536e7)).toUTCString(),document.body.appendChild(userData)}),QQWB.extend("store",{set:function(a,b,c){a="k"+a;var d=QQWB.time.secondsNow()+(c||7)*24*3600,e={value:b,expire:d};return!userData&&QQWB.log.error("store can't set value for key "+a+", userData is unavaiable, please try later"),userData&&userData.load(storeName),userData&&userData.setAttribute(a,JSON.stringify(e)),userData&&userData.save(storeName),userData.getAttribute(a)},get:function(a,b){a="k"+a,!userData&&QQWB.log.error("store can't get value for key "+a+", userData is unavaiable, please try later"),userData&&userData.load(storeName);var c=userData&&userData.getAttribute(a);return c&&(c=JSON.parse(c))&&c.value&&QQWB.time.secondsNow()<c.expire?c.value:b},del:function(a){return a="k"+a,!userData&&QQWB.log.error("store can't delete value for key "+a+", userData is unavaiable, please try later"),userData&&userData.load(storeName),userData&&userData.removeAttribute(a),userData&&userData.save(storeName),!userData.getAttribute(a)}})}else QQWB.log.warning("T.localStorage object isn't initialized, do check before use");if(QQWB.browser.feature.localstorage||QQWB.browser.feature.userdata)QQWB._alias.call(QQWB.localStorage,"save",QQWB.localStorage.set),QQWB._alias.call(QQWB.localStorage,"remove",QQWB.localStorage.del)