(function(){var a,b=window.T;a={name:"OpenJS",version:"2.0",debug:!1,noConflict:function(){return b&&(window.T=b),a},copy:function(a,b,c,d){for(var e in b)if(c||typeof a[e]=="undefined")a[e]=d?d(b[e]):b[e];return a},create:function(a,b){var c=this,d=a?a.split("."):[],e=d.length;for(var f=0;f<e;f++){var g=d[f],h=c[g];h||(h=b&&f+1===e?b:{},c[g]=h),c=h}return c},extend:function(b,c,d){return a.copy(typeof b=="string"?a.create.call(this,b):b,c,d)},uid:function(a){var b;a=a||6,b=Math.random().toString(16).substr(2);if(b.length>a)b=b.substr(0,a);else if(b.length<a)for(var c=0,d=a-b.length;c<d;c++)b+=Math.random().toString(16).substr(2,1);return b}},a.provide=a.create,window.QQWBENVS&&typeof QQWBENVS.Debug!="undefined"&&(a.debug=QQWBENVS.Debug),window.QQWB=window.T=a})(),QQWB.extend("",{bind:function(a,b){a=a.toLowerCase();var c=QQWB,d=c.bigtable,e=d.get("eventhandler",a);return e?QQWB.Array.inArray(e,b)||e.push(b):d.put("eventhandler",a,[b]),c},once:function(a,b){a=a.toLowerCase();var c=QQWB,d;return d=function(){var e=b.apply(QQWB,arguments);return c.unbind(a,d),d=null,e},c.bind(a,d),c},unbind:function(a,b){a=a.toLowerCase();var c=QQWB,d=c.bigtable,e=d.get("eventhandler",a),f;if(e)if(b)for(f=0,l=e.length;f<l;f++)b===e[f]&&(b=null,e.splice(f,1));else d.del("eventhandler",a);return!d.get("eventhandler",a)},trigger:function(a,b){a=a.toLowerCase();var c=QQWB,d=c.Array,e=c.bigtable,f=e.get("eventhandler",a);if(f)return d.forEach(f,function(a,d){if(a)return a.call(c,b);return});return}}),QQWB.extend("Function",{isFunction:function(a){return typeof a=="function"}}),QQWB.extend("String",{_trimLeft:/^\s+/,_trimRight:/\s+$/,isString:function(a){return typeof a=="string"},ltrim:function(a){return a==null?"":a.toString().replace(this._trimLeft,"")},rtrim:function(a){return a==null?"":a.toString().replace(this._trimRight,"")},trim:String.prototype.trim?function(a){return a==null?"":String.prototype.trim.call(a)}:function(a){return a==null?"":a.toString().replace(this._trimLeft,"").replace(this._trimRight,"")},startsWith:String.prototype.startsWith?function(a,b){return a==null?!1:String.prototype.startsWith.call(a,b)}:function(a,b){return a==null?!1:a.toString().indexOf(b)==0},endsWith:String.prototype.endsWith?function(a,b){return a==null?!1:String.prototype.endsWith.call(a,b)}:function(a,b){return a==null?!1:a.toString().lastIndexOf(b)>=0&&a.toString().lastIndexOf(b)+b.length==a.length}}),QQWB.extend("Array",{isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"},inArray:function(a,b){for(var c=0,d=a.length;c<d;c++)if(b===a[c])return!0;return!1},fromString:function(a,b,c){return QQWB.String.isString(a)?(b=b||"",c?a.split(b,c):a.split(b)):[]},fromArguments:function(a,b){return typeof a!="object"?[]:b?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a)},toArray:function(a){return typeof a=="string"?a.split(""):typeof a=="object"?Array.prototype.slice.call(a,0):this.toArray(a.toString())},each:function(a,b){for(var c=0,d=a.length;c<d;c++)if(!1===b(c,a[c]))break},forEach:function(a,b,c){var d=[];if(a){var e=c||this;for(var f=0,g=a.length,h;f<g;f++)h=b.call(e,a[f],f,a),h!==undefined&&d.push(h)}return d},get:function(a,b){var c=a.length;if(Math.abs(b)<c)return b>=0?a[b]:a[c+b]}}),function(){var a;a=function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,f,g;b&&(g=b,b=0);for(var h=0,i=c.length;h<i;h++)f=c[h],QQWB.Array.isArray(f)?e.done.apply(e,f):QQWB.Function.isFunction(f)&&a.push(f);g&&e.resolveWith(g[0],g[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){return e.resolveWith(this,arguments),this},isResolved:function(){return!!c||!!b},cancel:function(){return d=1,a=[],this}};return e},QQWB.extend("deferred",{deferred:function(b){var c,d=a(),e=a();return QQWB.extend(d,{fail:e.done,then:function(a,b){return d.done(a).fail(b),this},always:function(){return d.done.apply(d,arguments).fail.apply(this,arguments)},rejectWith:e.resolveWith,reject:e.resolve,isRejected:e.isResolved,promise:function(a){var b="done fail isResolved isRejected promise then always success error complete whatever".split(" ");if(a==null){if(c)return c;c=a={}}var e=b.length;while(e--)a[b[e]]=d[b[e]];return a}}),d.success=d.done,d.error=d.fail,d.complete=d.whatever=d.always,d.done(e.cancel).fail(d.cancel),delete d.cancel,b&&b.call(d,d),d},when:function(a){function f(a){return function(c){b[a]=arguments.length>1?QQWB.Array.fromArguments(arguments):c,--d||e.resolveWith(e,QQWB.Array.fromArguments(b))}}var b=arguments,c=b.length,d=c,e=c<=1&&a&&QQWB.Function.isFunction(a.promise)?a:QQWB.deferred.deferred();if(c>1)for(var g=0;g<c;g++)b[g]&&QQWB.Function.isFunction(b[g].promise)?b[g].promise().then(f(g),e.reject):--d,d||e.resolveWith(e,b);else e!==a&&e.resolveWith(e,c?[a]:[]);return e.promise()}}),QQWB.task=QQWB.when=QQWB.deferred.when}(),function(){var a={1:"参数错误",2:"频率受限",3:"鉴权失败",4:"内部错误"},b={4:"过多脏话",5:"禁止访问",6:"记录不存在",8:"内容过长",9:"内容包含垃圾信息",10:"发表太快，频率限制",11:"源消息不存在",12:"未知错误",13:"重复发表"};QQWB.extend("weibo.util",{parseRetCode:function(a){var b=a.match(/\"ret\":(\d+)\}/)||a.match(/<ret>(\d+)<\/ret>/);return b?parseInt(b[1],10):b},parseErrorCode:function(a){var b=a.match(/\"errcode\":(-?\d+)/)||a.match(/<errcode>(\d+)<\/errcode>/);return b?parseInt(b[1],10):b},getErrorMessage:function(c,d){var e=[],c=c+"",d=d+"",f=a[c],g=b[d];return f&&e.push(f),g&&e.push(g),e.length>0?e.join(","):"未知错误"},compat:function(a){return!QQWB.String.startsWith(a,"/")&&(a="/"+a),a.toLowerCase()}})}(),QQWB.extend("log",{CRITICAL:50,ERROR:40,WARNING:30,INFO:20,DEBUG:10,NOTSET:0,_level:0,setLevel:function(a){return this._level=a,this},debug:function(a){return this.DEBUG>=this._level&&this._out("DEBUG",a),this},info:function(a){return this.INFO>=this._level&&this._out("INFO",a),this},warning:function(a){return this.WARNING>=this._level&&this._out("WARNING",a),this},error:function(a){return this.ERROR>=this._level&&this._out("ERROR",a),this},critical:function(a){return this.CRITICAL>=this._level&&this._out("CRITICAL",a),this},_out:function(a,b){var c;output=[window.name?window.name:"",window.opener||window.name===QQWB.bigtable.get("authwindow","name")?"#":"",window!=window.parent?"*":"",QQWB.name,": ","["+a+"] ",QQWB.time.shortTime()+" ",b].join(""),c=QQWB.bigtable.get("log","latest"),c||(c=QQWB.bigtable.put("log","latest",[])),c.length>=100&&c.shift(),c.push(output),QQWB.debug&&window.console&&window.console.log(output)},latest:function(){var a=QQWB.bigtable.get("log","latest");return a?a.join("\n"):""}}),QQWB.log.warn=QQWB.log.warning,window.QQWBENVS&&typeof QQWBENVS.LogLevel=="number"&&QQWB.log.setLevel(QQWBENVS.LogLevel),QQWB.extend("time",{now:function(){return this.dateNow().getTime()},secondsNow:function(){return Math.round(this.now()/1e3)},dateNow:function(){return new Date},shortTime:function(a,b){var c;return a instanceof Date||(b=a,a=this.dateNow()),[a.getFullYear(),"/",a.getMonth(),"/",a.getDate()," ",(c=a.getHours())&&c<10?"0"+c:c,":",(c=a.getMinutes())&&c<10?"0"+c:c,":",(c=a.getSeconds())&&c<10?"0"+c:c].join("")}}),function(){function b(a,b){var c=QQWB,d=c.String;return d.isString(a)||c.log.warn("bigtable inName is not a str"),d.isString(b)||c.log.warn("bigtable inKey is not a str"),["bt",a,b].join("_")}var a={};QQWB.extend("bigtable",{put:function(c,d,e){var f=b(c,d);return a[f]=e,a[f]},get:function(c,d,e){var f=b(c,d),g=a[f],h;return e!=h&&g==h&&(g=e,a[f]=g),g},del:function(c,d){var e=b(c,d);try{delete a[e]}catch(f){a[e]=null}},has:function(c,d){var e=b(c,d);return a.hasOwnProperty(e)},_:function(){return a}}),QQWB.bigtable.set=QQWB.bigtable.put}(),function(){var a=QQWB,b=a.bigtable,c="http://open.t.qq.com";b.put("uri","api",[c,"/api"].join("")),b.put("uri","auth",[c,"/oauth2_html/login.php"].join("")),b.put("uri","html5proxy",[c,"/proxy/proxy.html"].join("")),b.put("uri","flashas3proxy",[c,"/proxy/proxy_as3_v2.swf"].join("")),b.put("uri","exchangetoken",[c,"/cgi-bin/exchange_token"].join("")),b.put("uri","autotoken",[c,"/cgi-bin/auto_token"].join("")),b.put("authwindow","name","authClientProxy_ee5a0f93"),b.put("authwindow","width","575"),b.put("authwindow","height","465"),window.QQWBENVS&&typeof QQWBENVS.CookieDomain!="undefined"?b.put("cookie","domain",QQWBENVS.CookieDomain):b.put("cookie","domain",""),window.QQWBENVS&&typeof QQWBENVS.CookiePath!="undefined"?b.put("cookie","path",QQWBENVS.CookiePath):b.put("cookie","path","/"),b.put("cookie","accesstokenname","QQWBToken"),b.put("cookie","refreshtokenname","QQWBRefreshToken"),b.put("nativeevent","userloggedin","UserLoggedIn"),b.put("nativeevent","userloginfailed","UserLoginFailed"),b.put("nativeevent","userloggedout","UserLoggedOut"),b.put("nativeevent","tokenready","tokenReady"),b.put("nativeevent","documentready","documentReady"),b.put("nativeevent","everythingready","everythingReady"),b.put("solution","deferred",a.deferred.deferred()),b.put("solution","jscallbackname","onFlashReady_a1f5b4ce"),b.put("api","count",0),b.put("ping","urlbase","http://btrace.qq.com/collect"),b.put("ping","paramorder",["ftime","sIp","iQQ","sBiz","sOp","iSta","iTy","iFlow"]),b.put("ping","paramsep",";"),b.put("io","timeout",3e4),QQWB.provide("init",function(a){var b=QQWB,c=b.bigtable,d=b.ping,e=b.log,f="base",g;g=c.get("boot","tokenready");if(c.get(f,"inited")===!0){e.warning("already initialized");return}e.info("init signal has arrived"),a=b.extend({callbackurl:document.location.href.replace(location.search,"").replace(location.hash,""),pingback:!0,synclogin:!0,autoclose:!0,samewindow:!1},a,!0),c.put(f,"pingback",a.pingback),c.put(f,"autoclose",a.autoclose),c.put(f,"samewindow",a.samewindow);var h=b._token.getAccessToken(),i=b._token.getAccessToken(!0),j=b._token.getRefreshToken(),k=j&&!h&&i,l=!j&&!h&&a.synclogin;a.appkey&&(e.info("client id is "+a.appkey),c.put("base","appkey",a.appkey)),e.info("client proxy uri is "+a.callbackurl),c.put("uri","redirect",a.callbackurl),k?(g.lock(),e.info("exchanging refresh token to access token..."),QQWB._token.exchangeForToken(function(b){a.synclogin&&b.error&&(QQWB.log.warning("exchange token has failed, trying to retrieve a new access_token..."),g.lock(),QQWB._token.getNewAccessToken(function(){g.unlock()})),g.unlock()})):l&&(g.lock(),e.info("retrieving new access token..."),b._token.getNewAccessToken(function(){g.unlock()})),c.put(f,"inited",!0),g.unlock();if(d&&a.pingback){d.pingInit();if(typeof a.pingback=="number"&&a.pingback>1||typeof a.pingback=="boolean")b.bind(c.get("nativeevent","userloggedin"),d.pingLoggedIn),b.bind(c.get("nativeevent","userloginfailed"),d.pingLoggedInFailed)}return b})}(),function(){var a=QQWB,b=a.bigtable,c=a.log,d=a.time,e=b.get("io","timeout"),f,g,h,i=0,j,k,l;f=function(a){var b;return{send:function(f){var g=d.now(),h=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=setTimeout(function(){c.error("load script "+a.url+" timeout"),f(599,"timeout",d.now()-g),f=null},e);b=document.createElement("script"),b.async="async",a.charset&&(b.charset=a.charset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){if(c||!b.readyState||/loaded|complete/.test(b.readyState)){var e;clearTimeout(i),b.onload=b.onreadystatechange=null,h&&b.parentNode&&h.removeChild(b),b=null,f&&(e=d.now()-g,c?f(-1,"aborted",e):f(200,"success",e),f=null)}},b.onerror=function(a){clearTimeout(i),f&&f(404,a,d.now()-g),f=null},h.insertBefore(b,h.firstChild)},abort:function(){b&&b.onload(0,1)}}},g=function(b){var f;return{send:function(g){var h=d.now(),i=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),j=setTimeout(function(){c.error("ajax timeout, url "+b.url),g(599,"timeout",d.now()-h),g=null},e);b.async||(b.async="async"),b.username?i.open(b.type,b.url,b.async,b.username,b.password):i.open(b.type,b.url,b.async);try{b.type.toUpperCase()=="POST"&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("X-Requested-From","openjs"+a.version)}catch(k){c.warning("set header error "+k)}i.send(b.data||null),f=function(e,k){var l,m,n,o,p,q;try{if(f&&(k||i.readyState===4)){f=null;if(k)i.readyState!==4?(clearTimeout(j),i.abort(),g&&g(-1,"aborted",d.now()-h),g=null):c.debug("abort ajax failed, already finish");else{clearTimeout(j),l=i.status,n=i.getAllResponseHeaders()||"",o={},q=i.responseXML,q&&q.documentElement&&(o.xml=q),o.text=i.responseText;try{m=i.statusText}catch(r){m=""}l===1223&&(l=204),b.dataType.toLowerCase()=="json"?p=a.JSON.fromString(o.text):b.dataType.toLowerCase()=="xml"?p=o.xml:p=o.text}g(l,m,d.now()-h,p,o.text,n,b.dataType),g=null}}catch(s){clearTimeout(j),c.error("caught exception "+[s.type,s.message].join(" ")+" in ioajax"),g(-2,"exception "+s,d.now()-h),g=null}},!b.async||i.readyState===4?f():i.onreadystatechange=f},abort:function(){f&&f(0,1)}}},h=function(a){var f;return{send:function(g){var h=d.now(),j=b.get("solution","flashmovie"),k="as3callbacktkt"+ ++i,l=setTimeout(function(){c.error("flash as3 timeout, url "+a.url),g(599,"timeout",d.now()-h),g=null},e);f=function(b,e){var i,j,k,m,n,o;try{f&&(f=null,clearTimeout(l),e?(g&&g(-1,"aborted",d.now()-h),g=null):(i=this.httpStatus,j=this.httpStatus==200?"ok":"",k="",m={},m.text=this.httpResponseText,a.dataType.toLowerCase()=="json"?n=QQWB.JSON.fromString(m.text):a.dataType.toLowerCase()=="xml"?n=QQWB.XML.fromString(m.text):n=m.text),g(i,j,d.now()-h,n,m.text,k,a.dataType),g=null)}catch(p){clearTimeout(l),c.error("caught exception "+[p.type,p.message].join(" ")+" in ioas3"),g(-2,"exception "+p,d.now()-h),g=null}},b.put("io",k,f),j&&j.httpRequest?j.httpRequest(a.url,a.data,a.type,k):c.critical("flash transportation object error")},abort:function(){f&&f(0,1)}}},window.onFlashRequestComplete_8df046=function(a){var d,e;if(!a.ticket){c.error("ticket doesn't exists in response");return}d=b.get("io",a.ticket),e=a.srcEvent,d.readyState||(d.readyState=0),/httpStatus/i.test(e.type)?(d.httpStatus=e.status,d.readyState++):/error/i.test(e.type)?(d.httpError=e.type,d.readyState++):/complete/i.test(e.type)&&(d.httpResponseText=e.target.data,d.readyState++),d.readyState==2&&(d.call(d),b.del("io",a.ticket))},k=function(a){return function(b,c,d,e,f,g,h){var i,j;b!==200?(b=2e6+Math.abs(b?b:0),a.reject(b,c,d,"")):typeof (i=QQWB.weibo.util.parseRetCode(f))=="number"&&0!==i?(j=QQWB.weibo.util.parseErrorCode(f),b=1e6+i*1e3+500+(j?j:0),a.reject(b,QQWB.weibo.util.getErrorMessage(i,j),d,f)):a.resolve(b,c,d,e,g,h)}},l=function(a){return function(b,c,d,e,f,g,h){b!==200?a.reject(b,c,d,""):a.resolve(e,d,f)}},QQWB.extend("io",{flashAjax:function(a){var b=QQWB.deferred.deferred(),c={type:"get",dataType:"json"};return QQWB.extend(c,a,!0),h(c).send(k(b)),b.promise()},ajax:function(a){var b=QQWB.deferred.deferred(),c={type:"get",dataType:"json"};return QQWB.extend(c,a,!0),g(c).send(k(b)),b.promise()},ajax2:function(a){var b=QQWB.deferred.deferred(),c={type:"get",dataType:"json"};return QQWB.extend(c,a,!0),g(c).send(l(b)),b.promise()},script:function(a,b){var b=b||"utf-8",c=QQWB.deferred.deferred();return f({charset:b,url:a}).send(function(a,b,d){a!==200?c.reject(a,b,d):c.resolve(a,b,d)}),c.promise()},jsonp:function(a){var b=QQWB.deferred.deferred(),d="jsonp_"+QQWB.uid(5),e=window.callbackName,g,h={dataType:"text",charset:"utf-8",url:""};return QQWB.extend(h,a,!0),h.data&&(h.url+="?"+h.data+"&callback="+d),window[d]=function(a){var f=a;try{h.dataType.toLowerCase()==="json"?f=QQWB.JSON.fromString(a):h.dataType.toLowerCase()==="xml"&&(f=QQWB.XML.fromString(a))}catch(i){c.error("caught exception "+[i.type,i.message].join(" ")+" in ioajax"),b.reject(-2,"exception "+i,g)}b.resolve(f,g),window[d]=e},f(h).send(function(a,c,d){a!==200&&b.reject(a,c,d),g=d}),b.promise()}}),QQWB.ajax=QQWB.io.ajax2,QQWB.jsonp=QQWB.io.jsonp,QQWB.script=QQWB.io.script}(),QQWB.provide("api",function(a,b,c,d,e){var f=QQWB,g=f.Array,h=f.String,i=f.JSON,j=f.XML,k=f.bigtable,l=f.log,m=f.queryString,n=f.io,o=k.get("api","count"),p=k.get("solution","deferred"),q=k.get("solution","name"),r=c,s={json:!0,xml:!0},t=f.deferred.deferred(),u=t.promise(),v,w,x,y;a=f.weibo.util.compat(a),b=b||{},c=(c||"json").toLowerCase(),d=d||"GET",e=e||{},v=e.appkey||e.clientid||k.get("base","appkey"),w=e.accesstoken||e.token||f._token.getAccessToken(),r in s||(r="json"),b.oauth_consumer_key=v,b.oauth_token=w,b.oauth_version="2.0",b.format=r;if(!v)return l.error("appkey can not be empty"),t.reject(-1,"appkey cant not be empty",0),u;w||l.warn("accesstoken is empty");if(!p.isResolved()&&!p.isRejected())return l.warning("api call cached, waiting solution ready ..."),p.promise().done(function(){l.info("invoking cached api call "+a+"..."),f.api(a,b,c,d,e).success(function(){t.resolveWith(t,arguments)}).error(function(){t.rejectWith(t,arguments)})}).fail(function(){l.error("can't invoking cached api call "+a+"..."),t.rejectWith(t,arguments)}),u;if(!p.isResolved())return p.fail(function(){l.error(arguments[1]),t.rejectWith(t,arguments)}),u;k.put("api","count",++o),l.info("["+o+"] sending weibo request...");if(q==="html5")x=k.get("solution","frame"),x?(y=k.get("api","ondataback"),y||(y=k.put("api","ondataback",function(a){var b,c,d,e;k.get("uri","html5proxy").indexOf(a.origin)!==0?l.warn("ignore data from origin "+a.origin):(b=i.fromString(a.data),c=b.id,e=b.data,d=k.get("api","resultdeferred"+c),d?(e[0]!==200?d.rejectWith(d,e):(e[5]=="xmltext"&&(e[3]=j.fromString(e[3])),d.resolve(e[3],e[2],e[4])),k.del("api","resultdeferred"+c)):l.error("invalid api request id "+c))}),window.addEventListener?window.addEventListener("message",y,!1):window.attachEvent&&window.attachEvent("onmessage",y)),k.put("api","resultdeferred"+o,t),setTimeout(function(){x.contentWindow.postMessage(i.stringify({id:o,data:[a,b,c,d]}),k.get("uri","html5proxy"))},0)):(l.error(-1,"proxy frame not found"),t.reject(-1,"proxy frame not found"));else if(q==="as3"){function z(a,b,c,d){var e={type:h.trim(d.toUpperCase()),url:k.get("uri","api")+a,data:m.encode(b),dataType:h.trim(c.toLowerCase())};return e.type=="GET"&&(e.url+=e.data?"?"+e.data:"",delete e.data),n.flashAjax(e)}z(a,b,c,d).complete(function(){arguments[0]!==200?t.rejectWith(t,arguments):t.resolve(arguments[3],arguments[2],arguments[4])})}return function(){var e=o,g=q,h=k.get("base","pingback");u.complete(function(){l.info("*["+e+"] done"),e=null});if(f.ping&&h&&(typeof h=="boolean"||typeof h=="number"&&h>2)){function i(e,h,i){i=i||0,f.ping.pingAPI(a,m.encode(b),c,d,e,h,i,g)}u.success(function(a,b){i(200,"ok",b)}),u.fail(function(a,b,c){i(a,b,c)})}}(),u}),function(){var a=QQWB,b={},c;c={add:function(a){return this.tmpl.push(a),this},data:function(b,c){return a.extend(this.data,b,c),this},renderWith:function(b,c){return c&&a.extend(this.data,b,c),a.template.renderTemplate(this.tmpl.join(""),b)},render:function(){return this.renderWith(this.data)},toString:function(){try{return this.render()}catch(a){return""}}},a.provide("template",function(b){var d=a.Object.create(c);return d.tmpl=[],d.data={},d}),a.extend("template",{renderTemplate:function(a,c){function d(a,c){var e=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):b[a]=b[a]||d(document.getElementById(a).innerHTML);return c?e(c):e}return d(a,c)}})}(),QQWB.extend("queryString",{encode:function(a,b,c,d){var e=/%20/g,f=b||"&",g=c||encodeURIComponent,h=[],i=[],j,k;for(j in a)if(a.hasOwnProperty(j)){k=a[j];if(k!==null&&typeof k!="undefined"){j=g(j).replace(e,"+"),k=g(k).replace(e,"+");if(!d)h.push(j+"="+k);else for(var l=0,m=d.length;l<m;l++)d[l]===j&&(h[l]=j+"="+k)}}for(var n=0,o=h.length;n<o;n++)typeof h[n]!="undefined"&&i.push(h[n]);return h=i,i=null,h.join(f)},decode:function(a,b,c){var d=c||decodeURIComponent,e=b||"&",f=a.split(e),g={},h;for(var i=0,j=f.length;i<j;i++)h=f[i].split("=",2),h&&h[0]&&(g[d(h[0])]=d(h[1]));return g}}),function(){function i(a){a=a.toLowerCase();var b,f;return b=function(){var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");while(c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0]);return b>4?b:a}(),b?{browser:"msie",version:b}:(f=d.exec(a)||c.exec(a)||a.indexOf("compatible")<0&&e.exec(a)||[],{browser:f[1]||"unknown",version:f[2]||"0"})}function j(){var a,b;for(a in h)h.hasOwnProperty(a)&&(b=h[a](),b&&(f[a]=b))}function k(){var a=navigator.userAgent||navigator.vendor||window.opera;return/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)?{mobile:!0}:{pc:!0}}function l(){var a=navigator.appVersion,b={},c="unknown";return a.indexOf("Win")!=-1&&(c="windows"),a.indexOf("Mac")!=-1&&(c="mac"),a.indexOf("X11")!=-1&&(c="unix"),a.indexOf("Linux")!=-1&&(c="linux"),b[c]=!0,b.name=c,b}var a,b=navigator.userAgent,c=/(opera)(?:.*version)?[ \/]([\w.]+)/,d=/(webkit)[ \/]([\w.]+)/,e=/(mozilla)(?:.*? rv:([\w.]+))?/,f={},g=["Webkit","Moz","O","ms","khtml"],h={cookie:function(){var a=navigator.cookieEnabled;if(a&&QQWB.browser.webkit){var b="COOKIE_TEST_"+QQWB.uid();document.cookie=b+"="+1+"; domain=; path=;",document.cookie.indexOf(b)<0?a=!1:document.cookie=b+"="+"; expires="+(new Date(1970,1,1)).toUTCString()+"; domain=; path=;"}return!a&&QQWB.log.warn("This browser doesn't support cookie or cookie isn't enabled"),a},flash:function(){var a,b,c,d,e;if(typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]=="object")a=navigator.plugins["Shockwave Flash"].description,b=typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin,a&&b&&(a=a.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),d=[],d[0]=parseInt(a.replace(/^(.*)\..*$/,"$1"),10),d[1]=parseInt(a.replace(/^.*\.(.*)\s.*$/,"$1"),10),d[2]=/[a-zA-Z]/.test(a)?parseInt(a.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof window.ActiveXObject!="undefined"){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(f){}c&&(a=c.getVariable("$version"),a?(a=a.split(" ")[1].split(","),d=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)]):d=[0,0,0])}if(d)return e={version:d.join(".")},d[0]>=9&&(e.externalInterface=!0),e},userdata:function(){return QQWB.browser.msie},postmessage:function(){return!!window.postMessage&&(QQWB.browser.msie&&parseInt(QQWB.browser.version,10)<8?!1:!0)},canvas:function(){var a=document.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},webgl:function(){return!!window.WebGLRenderingContext},geolocation:function(){return!!navigator.geolocation},websqldatabase:function(){return!!window.openDatabase},indexeddb:function(){for(var a=0,b=g.length;a<b;a++)if(window[g[a].toLowerCase()+"IndexedDB"])return!0;return!!window.indexedDB},websocket:function(){for(var a=0,b=g.length;a<b;a++)if(window[g[a].toLowerCase()+"WebSocket"])return!0;return!!window.WebSocket},localstorage:function(){return!!window.localStorage&&!!localStorage.getItem},sessionstorage:function(){return!!window.sessionStorage&&!!sessionStorage.getItem},webworker:function(){return!!window.Worker},applicationcache:function(){return!!window.applicationCache}};a=i(b),QQWB.extend("browser",{version:a.version}),QQWB.browser[a.browser]=!0,QQWB.browser.engine=a.browser,j(),QQWB.extend("browser.feature",f),QQWB.extend("browser.platform",k()),QQWB.extend("browser.os",l())}(),QQWB.browser.feature.cookie?QQWB.extend("cookie",{set:function(a,b,c,d,e,f){var g,h,i;f=f||escape;if(typeof c=="undefined"||c===null)c=-1;return g=e?"domain="+e:"",h=d?"path="+d:"",i="",c===0?i="expires="+(new Date(1970,1,1)).toUTCString():c>0&&(i="expires="+(new Date((new Date).getTime()+c*1e3)).toUTCString()),document.cookie=[a+"="+f(b),i,h,g].join("; "),QQWB},get:function(a,b,c){b=b||unescape,a+="=",cookies=(document.cookie||"").split(/\s*;\s*/);for(var d=0,e=cookies.length;d<e;d++){var f=cookies[d];if(f.indexOf(a)===0)return b(f.substr(a.length))}return c},del:function(a,b,c){return QQWB.cookie.set(a,"",0,b,c),document.cookie.indexOf(a+"=")>=0&&QQWB.log.warning("cookie may not be deleted as you expected"),QQWB}}):QQWB.log.debug("cookie isn't support or be enabled"),QQWB.extend("_token",{setAccessToken:function(a,b,c,d){var e=QQWB,f=e.bigtable,g=e.cookie,h=e.time,i;return i=this.getTokenUser(!0),g.set(f.get("cookie","accesstokenname"),[a,h.now()+b*1e3,c||i&&i.name||"",d||i&&i.nick||""].join("|"),31536e3,QQWB.bigtable.get("cookie","path"),QQWB.bigtable.get("cookie","domain")),e},getAccessToken:function(a){var b=QQWB,c=b.bigtable,d=b.cookie,e=b.time,f;f=d.get(c.get("cookie","accesstokenname"));if(f){f=f.split("|",2);if(a||parseInt(f[1],10)>e.now())return f[0]}},getTokenUser:function(a){var b=QQWB,c=b.bigtable,d=b.cookie,e=b.time,f;f=d.get(c.get("cookie","accesstokenname"));if(f){f=f.split("|",4);if(a||parseInt(f[1],10)>QQWB.time.now())return{name:f[2],nick:f[3]}}},clearAccessToken:function(){var a=QQWB,b=a.bigtable,c=a.cookie;return c.del(b.get("cookie","accesstokenname"),b.get("cookie","path"),b.get("cookie","domain"))},setRefreshToken:function(a){var b=QQWB,c=b.bigtable,d=b.cookie;return d.set(c.get("cookie","refreshtokenname"),a,31536e3,c.get("cookie","path"),c.get("cookie","domain")),b},getRefreshToken:function(){return QQWB.cookie.get(QQWB.bigtable.get("cookie","refreshtokenname"))},clearRefreshToken:function(){return QQWB.cookie.del(QQWB.bigtable.get("cookie","refreshtokenname"),QQWB.bigtable.get("cookie","path"),QQWB.bigtable.get("cookie","domain"))},exchangeForToken:function(a){var b=QQWB,c=b.bigtable,d=b.queryString,e=b.log,f=b.io,g=b.String,h=c.get("base","appkey");return f.jsonp({url:c.get("uri","exchangetoken"),data:d.encode({response_type:"token",client_id:h,scope:"all",state:"1",refresh_token:this.getRefreshToken(),access_token:this.getAccessToken(!0)})}).success(function(a){var c=a;g.isString(a)&&(a=d.decode(a)),a.access_token?(!a.expires_in&&e.error("accesstoken expires_in not returned"),!a.wb_name&&e.warning("weibo username not retrieved, will not update username"),!a.wb_nick&&e.warning("weibo nick not retrieved, will not update nick"),b._token.setAccessToken(a.access_token,parseInt(a.expires_in,10),a.wb_name,a.wb_nick),a.refresh_token?b._token.setRefreshToken(a.refresh_token):e.warning("refresh token not retrieved"),e.info("exchange token succeed")):a.error?e.error("exchange token error "+a.error):e.error("unexpected result returned from server "+c+" while exchanging for new accesstoken")}).error(function(a,b){a===404?e.error("exchange token has failed, script not found"):e.error("exchange token has failed, "+b)}).complete(function(b,c,d){a&&a(b,c,d)}),b},getNewAccessToken:function(a){var b=QQWB,c=b.bigtable,d=b.queryString,e=b.log,f=b.io,g=b.String,h=c.get("base","appkey");return f.jsonp({url:c.get("uri","autotoken"),data:d.encode({response_type:"token",client_id:h,scope:"all",state:"1"})}).success(function(a){var c=a;g.isString(a)&&(a=d.decode(a)),a.access_token?(!a.expires_in&&e.error("token expires_in not retrieved"),!a.wb_name&&e.warning("weibo username not retrieved"),!a.wb_nick&&e.warning("weibo usernick not retrieved"),b._token.setAccessToken(a.access_token,parseInt(a.expires_in,10),a.wb_name,a.wb_nick),a.refresh_token?b._token.setRefreshToken(a.refresh_token):e.warning("refresh token not retrieved"),e.info("retrieve new access token succeed")):a.error?e.error("retrieve new access token error "+a.error):e.error("unexpected result returned from server "+c+" while retrieving new access token")}).error(function(a,b){a===404?e.error("get token has failed, script not found"):e.error("get token failed, "+b)}).complete(function(b,c,d){a&&a(b,c,d)}),b},resolveResponse:function(a){var b=QQWB,c=b.bigtable,d=b.queryString,e=b.log,f=b.String,g,h=f.isString(a)?d.decode(a):a;h.access_token?(b._token.setAccessToken(h.access_token,parseInt(h.expires_in,10),h.wb_name,h.wb_nick),h.refresh_token?b._token.setRefreshToken(h.refresh_token):e.error("refresh token not retrieved"),g=b.loginStatus(),e.info("user "+g.name+" logged in"),b.trigger(c.get("nativeevent","userloggedin"),g)):h.error?(e.error("login error occurred "+h.error),h.message=h.error,b.trigger(c.get("nativeevent","userloginfailed"),h)):(e.error("unexpected result returned from server "+a),h.message=h.error="server error",b.trigger(c.get("nativeevent","userloginfailed"),h))}}),function(){var a=function(){var a=QQWB,b=a.bigtable,c=b.get("authwindow","width"),d=b.get("authwindow","height"),e=b.get("authwindow","name"),f=b.get("uri","auth"),g="toolbar=no,menubar=no,scrollbars=yes,resizable=yes,location=yes,status=no",h=!1,i=null;return{show:function(){var a=QQWB,b=a.bigtable,j=b.get("base","appkey"),k=b.get("base","autoclose"),l=b.get("base","samewindow"),m,n,o,p;if(!h){m=(window.screenX||window.screenLeft)+((window.outerWidth||document.documentElement.clientWidth)-c)/2,n=(window.screenY||window.screenTop)+((window.outerHeight||document.documentElement.clientHeight)-d)/2,o=a.queryString.encode({response_type:"token",client_id:j,redirect_uri:b.get("uri","redirect"),scope:"all",status:0}),p=["width="+c,"height="+d,"left="+m,"top="+n].join(",");if(l){window.name=e,window.location.replace(f+"?"+o);return}i=window.open(f+"?"+o,e,[p,g].join(",")),h=!0,function(){var a=QQWB,b=a.queryString;if(i.closed){a._token.resolveResponse("error=access_denied"),h=!1,i=null;return}try{response=i.location.hash}catch(c){response=null}if(response){response=b.decode(response.split("#").pop()),parseInt(response.status,10)==200&&a._token.resolveResponse(response),h=!1,k&&i.close(),i=null;return}setTimeout(arguments.callee,0)}()}else i&&i.focus()}}}();QQWB.extend("auth",{login:function(b,c){var d=QQWB,e=d.bigtable,f=d.log,g=e.get("base","inited"),h=d.loginStatus(),i;g||f.critical(d.name+" not initialized, call T.init() to initialize");if(h&&b)return b(h),d;if(b||c)i=function(a){a.access_token&&b?b(a):a.error&&c?c(a):f.error("wired result of T.login "+a),d.unbind(e.get("nativeevent","userloggedin"),i),d.unbind(e.get("nativeevent","userloginfailed"),i),i=null},d.bind(e.get("nativeevent","userloggedin"),i),d.bind(e.get("nativeevent","userloginfailed"),i);return a.show(),d},logout:function(a){var b=QQWB,c=b.bigtable,d=b.log,e=b.loginStatus();return d.info("logging out user"),e?(b._token.clearAccessToken(),b._token.clearRefreshToken(),d.info("user "+(e.name||"unknown")+"logged out")):d.warning("oops, user not logged in"),a&&a(),b.trigger(c.get("nativeevent","userloggedout")),b},loginStatus:function(a){var b=QQWB,c,d=b._token.getAccessToken(),e=b._token.getTokenUser();return d&&(c={access_token:d,name:e.name,nick:e.nick}),a&&a(c),c}}),QQWB.login=QQWB.auth.login,QQWB.logout=QQWB.auth.logout,QQWB.loginStatus=QQWB.auth.loginStatus}(),QQWB.extend("Object",{create:function(){return Object.create?Object.create:function(a,b){var c=function(){};return c.prototype=a,new c}}(),forEach:function(a,b,c,d){for(var e in a)d?b.call(c,a[e],e,a):a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}}),function(){function q(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function r(a,b,c,d,e,f){for(var g=0,i=d.length;g<i;g++){var j=d[g];if(j){var k=!1;j=j[a];while(j){if(j.sizcache===c){k=d[j.sizset];break}if(j.nodeType===1){f||(j.sizcache=c,j.sizset=g);if(typeof b!="string"){if(j===b){k=!0;break}}else if(h.filter(b,[j]).length>0){k=j;break}}j=j[a]}d[g]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,b=0,c=Object.prototype.toString,d=!1,e=!0,f=/\\/g,g=/\W/;[0,0].sort(function(){return e=!1,0});var h=function(b,d,e,f){e=e||[],d=d||document;var g=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var k,l,n,o,p,q,r,t,u=!0,v=h.isXML(d),w=[],x=b;do{a.exec(""),k=a.exec(x);if(k){x=k[3],w.push(k[1]);if(k[2]){o=k[3];break}}}while(k);if(w.length>1&&j.exec(b))if(w.length===2&&i.relative[w[0]])l=s(w[0]+w[1],d);else{l=i.relative[w[0]]?[d]:h(w.shift(),d);while(w.length)b=w.shift(),i.relative[b]&&(b+=w.shift()),l=s(b,l)}else{!f&&w.length>1&&d.nodeType===9&&!v&&i.match.ID.test(w[0])&&!i.match.ID.test(w[w.length-1])&&(p=h.find(w.shift(),d,v),d=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]);if(d){p=f?{expr:w.pop(),set:m(f)}:h.find(w.pop(),w.length===1&&(w[0]==="~"||
w[0]==="+")&&d.parentNode?d.parentNode:d,v),l=p.expr?h.filter(p.expr,p.set):p.set,w.length>0?n=m(l):u=!1;while(w.length)q=w.pop(),r=q,i.relative[q]?r=w.pop():q="",r==null&&(r=d),i.relative[q](n,r,v)}else n=w=[]}n||(n=l),n||h.error(q||b);if(c.call(n)==="[object Array]")if(!u)e.push.apply(e,n);else if(d&&d.nodeType===1)for(t=0;n[t]!=null;t++)n[t]&&(n[t]===!0||n[t].nodeType===1&&h.contains(d,n[t]))&&e.push(l[t]);else for(t=0;n[t]!=null;t++)n[t]&&n[t].nodeType===1&&e.push(l[t]);else m(n,e);return o&&(h(o,g,e,f),h.uniqueSort(e)),e};h.uniqueSort=function(a){if(o){d=e,a.sort(o);if(d)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},h.matches=function(a,b){return h(a,null,null,b)},h.matchesSelector=function(a,b){return h(b,null,null,[a]).length>0},h.find=function(a,b,c){var d;if(!a)return[];for(var e=0,g=i.order.length;e<g;e++){var h,j=i.order[e];if(h=i.leftMatch[j].exec(a)){var k=h[1];h.splice(1,1);if(k.substr(k.length-1)!=="\\"){h[1]=(h[1]||"").replace(f,""),d=i.find[j](h,b,c);if(d!=null){a=a.replace(i.match[j],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},h.filter=function(a,b,c,d){var e,f,g=a,j=[],k=b,l=b&&b[0]&&h.isXML(b[0]);while(a&&b.length){for(var m in i.filter)if((e=i.leftMatch[m].exec(a))!=null&&e[2]){var n,o,p=i.filter[m],q=e[1];f=!1,e.splice(1,1);if(q.substr(q.length-1)==="\\")continue;k===j&&(j=[]);if(i.preFilter[m]){e=i.preFilter[m](e,k,c,j,d,l);if(!e)f=n=!0;else if(e===!0)continue}if(e)for(var r=0;(o=k[r])!=null;r++)if(o){n=p(o,e,r,k);var s=d^!!n;c&&n!=null?s?f=!0:k[r]=!1:s&&(j.push(o),f=!0)}if(n!==undefined){c||(k=j),a=a.replace(i.match[m],"");if(!f)return[];break}}if(a===g)if(f==null)h.error(a);else break;g=a}return k},h.error=function(a){throw"Syntax error, unrecognized expression: "+a};var i=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!g.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,i=a.length,j;f<i;f++)if(j=a[f]){while((j=j.previousSibling)&&j.nodeType!==1);a[f]=e||j&&j.nodeName.toLowerCase()===b?j||!1:j===b}e&&h.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!g.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var i=c.parentNode;a[e]=i.nodeName.toLowerCase()===b?i:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&h.filter(b,a,!0)}},"":function(a,c,d){var e,f=b++,h=r;typeof c=="string"&&!g.test(c)&&(c=c.toLowerCase(),e=c,h=q),h("parentNode",c,f,a,e,d)},"~":function(a,c,d){var e,f=b++,h=r;typeof c=="string"&&!g.test(c)&&(c=c.toLowerCase(),e=c,h=q),h("previousSibling",c,f,a,e,d)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,g){a=" "+a[1].replace(f,"")+" ";if(g)return a;for(var h=0,i;(i=b[h])!=null;h++)i&&(e^(i.className&&(" "+i.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(i):c&&(b[h]=!1));return!1},ID:function(a){return a[1].replace(f,"")},TAG:function(a,b){return a[1].replace(f,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||h.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var c=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0,a[3]=c[3]-0}else a[2]&&h.error(a[0]);return a[0]=b++,a},ATTR:function(a,b,c,d,e,g){var h=a[1]=a[1].replace(f,"");return!g&&i.attrMap[h]&&(a[1]=i.attrMap[h]),a[4]=(a[4]||a[5]||"").replace(f,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=h(b[3],null,null,c);else{var g=h.filter(b[3],c,d,!0^f);return d||e.push.apply(e,g),!1}else if(i.match.POS.test(b[0])||i.match.CHILD.test(b[0]))return!0;return b},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!h(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=i.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||h.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var j=0,k=g.length;j<k;j++)if(g[j]===a)return!1;return!0}h.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=i.attrHandle[c]?i.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=i.setFilters[e];if(f)return f(a,c,b,d)}}},j=i.match.POS,k=function(a,b){return"\\"+(b-0+1)};for(var l in i.match)i.match[l]=new RegExp(i.match[l].source+/(?![^\[]*\])(?![^\(]*\))/.source),i.leftMatch[l]=new RegExp(/(^(?:.|\r|\n)*?)/.source+i.match[l].source.replace(/\\(\d+)/g,k));var m=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(n){m=function(a,b){var d=0,e=b||[];if(c.call(a)==="[object Array]")Array.prototype.push.apply(e,a);else if(typeof a.length=="number")for(var f=a.length;d<f;d++)e.push(a[d]);else for(;a[d];d++)e.push(a[d]);return e}}var o,p;document.documentElement.compareDocumentPosition?o=function(a,b){return a===b?(d=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(o=function(a,b){if(a===b)return d=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,e,f=[],g=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return p(a,b);if(!h)return-1;if(!i)return 1;while(j)f.unshift(j),j=j.parentNode;j=i;while(j)g.unshift(j),j=j.parentNode;c=f.length,e=g.length;for(var k=0;k<c&&k<e;k++)if(f[k]!==g[k])return p(f[k],g[k]);return k===c?p(a,g[k],-1):p(f[k],b,1)},p=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),h.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=h.getText(c.childNodes));return b},function(){var a=document.createElement("div"),b="script"+(new Date).getTime(),c=document.documentElement;a.innerHTML="<a name='"+b+"'/>",c.insertBefore(a,c.firstChild),document.getElementById(b)&&(i.find.ID=function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d?d.id===a[1]||typeof d.getAttributeNode!="undefined"&&d.getAttributeNode("id").nodeValue===a[1]?[d]:undefined:[]}},i.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),c.removeChild(a),c=a=null}(),function(){var a=document.createElement("div");a.appendChild(document.createComment("")),a.getElementsByTagName("*").length>0&&(i.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(i.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),document.querySelectorAll&&function(){var a=h,b=document.createElement("div"),c="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;h=function(b,d,e,f){d=d||document;if(!f&&!h.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(d.nodeType===1||d.nodeType===9)){if(g[1])return m(d.getElementsByTagName(b),e);if(g[2]&&i.find.CLASS&&d.getElementsByClassName)return m(d.getElementsByClassName(g[2]),e)}if(d.nodeType===9){if(b==="body"&&d.body)return m([d.body],e);if(g&&g[3]){var j=d.getElementById(g[3]);if(!j||!j.parentNode)return m([],e);if(j.id===g[3])return m([j],e)}try{return m(d.querySelectorAll(b),e)}catch(k){}}else if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){var l=d,n=d.getAttribute("id"),o=n||c,p=d.parentNode,q=/^\s*[+~]/.test(b);n?o=o.replace(/'/g,"\\$&"):d.setAttribute("id",o),q&&p&&(d=d.parentNode);try{if(!q||p)return m(d.querySelectorAll("[id='"+o+"'] "+b),e)}catch(r){}finally{n||l.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)h[d]=a[d];b=null}(),function(){var a=document.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(document.createElement("div"),"div"),d=!1;try{b.call(document.documentElement,"[test!='']:sizzle")}catch(e){d=!0}h.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(a))try{if(d||!i.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&a.document.nodeType!==11)return f}}catch(g){}return h(e,null,null,[a]).length>0}}}(),function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;i.order.splice(1,0,"CLASS"),i.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),document.documentElement.contains?h.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:document.documentElement.compareDocumentPosition?h.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:h.contains=function(){return!1},h.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var s=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=i.match.PSEUDO.exec(a))e+=c[0],a=a.replace(i.match.PSEUDO,"");a=i.relative[a]?a+"*":a;for(var g=0,j=f.length;g<j;g++)h(a,f[g],d);return h.filter(e,d)},t=window.Sizzle;h.noConflict=function(){window.Sizzle=t},window.Sizzle=h}(),function(){var a=QQWB,b=window.Sizzle,c={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"},d;d={find:function(a,c,d){return b(a,c,d)},createElement:function(a,b){var c=document.createElement(a);return this.setProperties(c,b),c},setProperties:function(a,b){var d=QQWB,e=d.Object;e.forEach(b,function(b,e){e=="style"?a.style.cssText=b:e=="class"?a.className=b:e=="for"?a.htmlFor=b:e in c?a.setAttribute(c[e],b):d.String.startsWith(e,"aria-")?a.setAttribute(e,b):d.String.startsWith(e,"data-")?a.setAttribute(e,b):a[e]=b})}},b.noConflict(),QQWB.provide("dom",a.Object.create(d))}(),QQWB.extend("dom",{ready:function(a){var b=QQWB,c=b.bigtable,d=c.get("document","ready"),e;return d?a&&a():(b.bind(c.get("nativeevent","documentready"),a),e=c.get("document","tryready"),e&&e()),b}}),QQWB.documentReady=QQWB.dom.ready,QQWB.find=QQWB.dom.find,function(){var a=QQWB,b=a.bigtable,c=a.dom,d=a.log,e=a.queryString,f=a.String,g,h;g=b.put("use","useable",[{name:"微评论",allowuse:!0,create:function(b){var f,g,h="http://comment.v.t.qq.com",i=location.href,j={};if(!b.appkey)throw f="创建"+this.name+"组件失败，缺少Appkey",d.error(f),new Error(f);return location.hash&&(i=i.replace(location.hash,"")),i=encodeURIComponent(i),a.extend(j,{src:[h,"?",e.encode({appkey:b.appkey,url:i})].join(""),width:b.width||560,height:b.height||500,frameborder:0,scrolling:"yes",allowtransparency:"true"}),g=c.createElement("iframe",j),g}}]),h={dimension:function(b,c){return typeof b=="object"?a.extend(this.config,b,!0):a.extend(this.config,{width:b,height:c},!0),this},config:function(b){return a.extend(this.config,b,!0),this},appkey:function(b){return a.extend(this.config,{appkey:b},!0),this},style:function(b){return a.extend(this.config,{style:b},!0),this},width:function(b){return a.extend(this.config,{width:b},!0),this},height:function(b){return a.extend(this.config,{height:b},!0),this},renderInto:function(b){function g(){var a=c.createComponent(c.config);if(typeof a!="undefined"&&a.nodeType==1)b.appendChild(a);else if(f.isString(a))b.innerHTML=a;else throw e="创建"+c.name+"组件失败",d.error(e),new Error(e)}var c=this,e;if(b.nodeType==1)g();else if(f.isString(b))a.dom.ready(function(){b=a.dom.find(b);if(b.length>0)b=b[0],g();else throw e="加载"+c.name+"组件失败，未找到父元素",d.error(e),new Error(e)});else throw e="加载"+c.name+"组件失败，无效的父元素"+b,d.error(e),new Error(e)},render:function(){var a,b=this;c.ready(function(){var a=document.getElementById("qqwb_root");b.renderInto(a)})}},a.provide("component",function(a,b){var c=QQWB,d=c.String,e=c.Array,f=c.Object,i=c.log,j,k,l;a=d.trim(a),e.each(g,function(b,c){if(c.name==a)return j=c,!1});if(!j)throw k="无法使用组件"+a+"，该组件不存在",i.error(k),new Error(k);if(!j.allowuse)throw k="无法使用组件"+a+"，暂不支持该组件",i.error(k),new Error(k);return l=c.Object.create(h),l.name=a,b?l.config=b:l.config={},l.createComponent=j.create,l})}(),QQWB.browser.feature.localstorage?QQWB.extend("localStorage",{set:function(a,b,c){a="k"+a;var d=QQWB,e=d.time.secondsNow()+(c||7)*24*3600,f={value:b,expire:e};return localStorage[a]=d.JSON.stringify(f),localStorage[a]},get:function(a,b){a="k"+a;var c=QQWB,d=localStorage[a];return d&&(d=c.JSON.parse(d))&&d.value&&c.time.secondsNow()<d.expire?d.value:b},del:function(a){return a="k"+a,localStorage.removeItem(a),typeof localStorage[a]=="undefined"}}):QQWB.browser.feature.userdata?function(){var a=QQWB,b,c="QQWBLocalStorage";a.dom.ready(function(){var c=a.bigtable.get("localstorage","writecache"),d=a.bigtable.get("localstorage","deletecache");b=document.createElement("input"),b.type="hidden",b.style.display="none",b.addBehavior("#default#userData"),b.expires=(new Date(a.time.now()+31536e7)).toUTCString(),document.body.appendChild(b),c&&c.length>0&&a.Array.forEach(c,function(b){a.localStorage.set.apply(a.localStorage,b)}),d&&d.length>0&&a.Array.forEach(d,function(b){a.localStorage.del.apply(a.localStorage,b)})}),a.extend("localStorage",{set:function(a,d,e){var f=QQWB,g,h,i;return b?(a="k"+a,h=f.time.secondsNow()+(e||7)*24*3600,i={value:d,expire:h},b.load(c),b.setAttribute(a,JSON.stringify(i)),b.save(c),b.getAttribute(a)):(g=f.bigtable.get("localstorage","writecache",[]),g.push(f.Array.fromArguments(arguments)),f.log.warning("userdata is not ready, save operation to write cache, key "+a),-1)},get:function(a,d){var e=QQWB,f;return a="k"+a,b?(b.load(c),f=b.getAttribute(a),f&&(f=JSON.parse(f))&&f.value&&e.time.secondsNow()<f.expire?f.value:d):(e.log.error("[localStorage] can't get value for key "+a+",userData is currently unavaiable"),d)},del:function(a){var d=QQWB,e;return b?(a="k"+a,b.load(c),b.removeAttribute(a),b.save(c),typeof b.getAttribute(a)=="undefined"):(e=d.bigtable.get("localstorage","deletecache",[]),e.push(d.Array.fromArguments(arguments)),d.log.warning("userdata is not ready, save operation to delete cache, key "+a),-1)}})}():QQWB.log.warning("localStorage is not supported and no workaround"),QQWB.localStorage&&(QQWB.localStorage.save=QQWB.localStorage.set,QQWB.localStorage.remove=QQWB.localStorage.del),QQWB.extend("ping",{pingWith:function(a,b){function c(){var a=QQWB.cookie.get("uin",null,"0").match(/\d+/)[0],b="";return{sIp:"",iQQ:a,sBiz:"openJS",sOp:"",iSta:"",iTy:1183,iFlow:b,iFrom:"",iPubFrom:"",sUrl:"",iUrlType:"",iPos:"",sText:"",iBak1:"",iBak2:"",sBak1:"",sBak2:QQWB.uid()}}a=QQWB.extend(c(),a,!0),QQWBPingTransport_18035d19=new Image(1,1),QQWBPingTransport_18035d19.src=[QQWB.bigtable.get("ping","urlbase"),"?",QQWB.queryString.encode(a,null,null,b)].join("")},pingInit:function(){function a(){var a=1e6,b=0;return QQWB.browser.msie?a+=100:QQWB.browser.opera?a+=200:QQWB.browser.webkit?a+=300:QQWB.browser.mozilla?a+=400:a+=500,QQWB.browser.feature.postmessage&&(b+=1),QQWB.browser.feature.flash&&(b+=2),QQWB.browser.feature.cookie&&(b+=4),a+=b,a}function b(){var a=1e6;return QQWB.browser.platform.mobile?a+=100:a+=200,QQWB.browser.os.windows?a+=10:QQWB.browser.os.windows?a+=20:QQWB.browser.os.mac?a+=30:QQWB.browser.os.unix?a+=40:QQWB.browser.os.linux?a+=50:a+=60,a}return QQWB.ping.pingWith({sOp:"init",iFrom:QQWB.version.replace(/\./g,""),iPubFrom:b(),sUrl:[document.title,document.location.href].join(QQWB.bigtable.get("ping","paramsep")),sText:QQWB.bigtable.get("base","appkey"),iBak1:a()},QQWB.bigtable.get("ping","paramorder").concat("iFrom","iPubFrom","sUrl","iUrlType","iPos","sText","iBak1","iBak2","sBak1","sBak2"))},_pingAuthorize:function(a){return QQWB.ping.pingWith({sOp:"login",iSta:a?1:0,iFrom:QQWB.version.replace(/\./g,""),sUrl:document.location.href,sText:QQWB.bigtable.get("base","appkey")},QQWB.bigtable.get("ping","paramorder").concat("iFrom","iPubFrom","sUrl","iUrlType","iPos","sText","iBak1","iBak2","sBak1","sBak2"))},pingLoggedIn:function(){return QQWB.ping._pingAuthorize(!0)},pingLoggedInFailed:function(){return QQWB.ping._pingAuthorize(!1)},pingAPI:function(a,b,c,d,e,f,g,h){var i=1e6;a=a||"",b=b||"",c=c||"",d=d||"",e=e||"-2",f=f||"",g=g||"-1",h=h||"";switch(h){case"html5":case"postmessage":i+=100;break;case"flash":case"as3":i+=200}d=d.toUpperCase();switch(d){case"GET":i+=10;break;case"POST":i+=20}return QQWB.ping.pingWith({sOp:"api",iSta:e,iFrom:QQWB.version.replace(/\./g,""),iPubFrom:i,sUrl:document.location.href,sText:QQWB.bigtable.get("base","appkey"),iBak1:g,sBak1:[a,b].join(QQWB.bigtable.get("ping","paramsep"))},QQWB.bigtable.get("ping","paramorder").concat("iFrom","iPubFrom","sUrl","iUrlType","iPos","sText","iBak1","iBak2","sBak1","sBak2"))}}),QQWB.extend("",{tokenReady:function(a){var b=QQWB,c=b.bigtable,d=c.get("boot","tokenready").isOpen();return d?a&&a():b.bind(c.get("nativeevent","tokenready"),a),b},everythingReady:function(a){var b=QQWB,c=b.bigtable,d=c.get("boot","everythingready").isOpen();return d?a&&a():b.bind(c.get("nativeevent","everythingready"),a),b}}),QQWB.ready=QQWB.everythingReady,QQWB.extend("door",{doors:0,door:function(a,b){var c=0;return this.doors++,{lock:function(){return c++,a&&a.call(QQWB),this},unlock:function(){return c--,c=Math.max(0,c),b&&b.call(QQWB),this},isOpen:function(){return c===0}}},count:function(){return this.doors}});var JSON;JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),QQWB.extend("JSON",{fromString:function(a){if(!a||!QQWB.String.isString(a))return{};a=a.replace(/^\s+/,"").replace(/\s+$/,"");if(window.JSON&&window.JSON.parse)a=window.JSON.parse(a);else if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))a=(new Function("return "+data))();else throw new SyntaxError("Invalid JSON: "+a);return a},stringify:function(a){return a==null?"":window.JSON.stringify(a)},toString:function(a){return QQWB.JSON.stringify(a)},parse:function(a){return a==null?{}:window.JSON.parse(a)}},!0),function(){var a=QQWB,b=a.bigtable,c=a.log,d=a.String,e=a.browser,f,g,h,i,j,k,l,m;f=b.put("boot","tokenready",QQWB.door.door(function(){c.info("tokenReady is locked")},function(){c.info("tokenReady is unlocked"),f.isOpen()&&c.info("token is ready")&&a.trigger(b.get("nativeevent","tokenready"))})),g=b.put("boot","everythingready",QQWB.door.door(function(){c.info("everythingReady is locked")},function(){c.info("everythingReady is unlocked"),g.isOpen()&&c.info("everything is ready")&&a.trigger(b.get("nativeevent","everythingready"))})),f.lock(),g.lock(),g.lock(),a.bind(b.get("nativeevent","tokenready"),function(){g.unlock()}),h=function(){var a=QQWB,b=a.log,c=a.dom,d=a.bigtable,e=d.get("uri","html5proxy"),f=d.get("solution","deferred"),g;g=function(a){e.indexOf(a.origin)!==0?b.warn("ignore a message from "+a.origin):a.data==="success"?(QQWB.log.info("html5 solution was successfully initialized"),f.resolve(),window.addEventListener?window.removeEventListener("message",g,!1):window.attachEvent&&window.detachEvent("onmessage",g),g=null):b.warn("ignore wired message from "+a.origin)},window.addEventListener?window.addEventListener("message",g,!1):window.attachEvent&&window.attachEvent("onmessage",g),c.ready(function(){var c,g="openjsframe_"+a.uid(5),h;b.info("init html5 solution ..."),c=document.createElement("iframe"),c.id=g,c.src=e,c.style.display="none",h=function(){setTimeout(function(){f.isResolved()||(f.reject(-6,"can't load proxy frame from path "+e+",request timeout"),b.critical("proxy frame error"))},3e3)},c.attachEvent?c.attachEvent("onload",h):c.onload=h,d.put("solution","frame",c),document.body.appendChild(c)})},i=function(){var a=QQWB,b=a.log,c=a.bigtable,d=a.browser,e=a.dom,f=a.flash,g=c.get("solution","deferred"),h=c.get("uri","flashas3proxy"),i,j;e.ready(function(){var e,f,k="openjsflash_"+a.uid(5),l=c.get("solution","jscallbackname");b.info("init flash as3 solution ..."),window[l]=function(){b.info("flash solution initlized successfully"),setTimeout(function(){f=window[k]||document.getElementById(k),f?(c.put("solution","flashmovie",f),g.resolve()):b.critical("proxy movie insertion error, os "+d.os.name+"; browser engine "+d.engine+"; version "+d.version)},0),i&&clearTimeout(i);try{delete window[l]}catch(a){window[l]=j}},e=document.createElement("div"),e.style.width="0px",e.style.height="0px",e.style.position="absolute",e.style.top="-9999px",d.msie&&d.os.windows?e.innerHTML=['<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ','id="'+k+'" ','name="'+k+'">','<param name="movie" value="'+h+'"></param>','<param name="allowscriptaccess" value="always"></param>',"</object>"].join(""):e.innerHTML=['<object type= "application/x-shockwave-flash"','id="'+k+'" ','data="'+h+'">','<param name="allowscriptaccess" value="always"></param>',"</object>"].join(""),document.body.appendChild(e),i=setTimeout(function(){if(!g.isResolved()){g.reject(-6,"can't load proxy swf from "+h+",request timeout");try{document.body.removeChild(e)}catch(a){}}},15e3)})},j=function(){h(),b.put("solution","name","html5")},k=function(){c.info("flash player version "+e.feature.flash.version),e.feature.flash.externalInterface||c.warn("flash player too old, openjs may not work properly"),i(),b.put("solution","name","as3")},l=function(a){var c=b.get("solution","deferred");c.reject(-6,a)};if(window.QQWBENVS&&typeof QQWBENVS.CrossDomainMethod!="undefined"){c.debug("read crossdomain method from enviroment variable"),m=d.trim(QQWBENVS.CrossDomainMethod.toLowerCase());switch(m){case"postmessage":case"html5":e.feature.postmessage?j():(c.critical("can not setup enviroment specified solution "+QQWBENVS.CrossDomainMethod+", please remove that enviroment variable"),l("postmessage solution can not be setted up"));break;case"flash":case"as3":e.feature.flash?k():(c.critical("can not setup enviroment specified solution "+QQWBENVS.CrossDomainMethod+", please remove that enviroment variable"),l("flash as3 solution can not be setted up"))}}else c.debug("detecting crossdomain method"),e.feature.postmessage?j():e.feature.flash?k():(c.critical("no solution available, switch to modern browser or install latest flash player, then refresh this page"),l("no solution available, need a modern browser or install lastest flash player"))}(),function(){var a=QQWB,b=a.bigtable,c;c=function(){var a=QQWB,b=a.bigtable,c=a.log,d=b.get("document","ready"),e,f,g,h;if(d)return;g=document.getElementsByTagName("body")[0];if(!g)return;try{h=g.appendChild(document.createElement("span")),h.parentNode.removeChild(h)}catch(i){return}b.put("document","ready",!0),c.info("document is ready"),b.get("boot","everythingready").unlock(),e=b.get("boot","tokenready").isOpen(),f=b.get("base","inited"),!e&&!f&&c.info("waiting for init ..."),a.trigger(b.get("nativeevent","documentready"))},b.put("document","tryready",c),window.addEventListener&&document.addEventListener("DOMContentLoaded",function(){c()},!1),window.attachEvent&&(document.attachEvent("onreadystatechange",function(){/complete/.test(document.readyState)&&(document.detachEvent("onreadystatechange",arguments.callee),c())}),window===window.top&&function(){var a=QQWB,b=a.bigtable,d=b.get("document","ready");if(d)return;try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}c()}()),a.browser.webkit&&function(){var a=QQWB,b=a.bigtable,d=b.get("document","ready");if(d)return;if(!/load|complete/.test(document.readyState)){setTimeout(arguments.callee,0);return}c()}()}(),function(){function f(){var g=!!a._token.getAccessToken(),h;e&&b.info("cancel the **OLD** maintain token schedule"),e&&clearTimeout(e),g?(h=parseInt(c.get(d.get("cookie","accesstokenname")).split("|")[1],10)-a.time.now()-15e3,b.info("scheduled to exchange token after "+h+"ms"),e=setTimeout(function(){a._token.exchangeForToken(function(){f()})},h)):(e&&b.info("cancel the exchange token schedule"),e&&clearTimeout(e))}var a=QQWB,b=a.log,c=a.cookie,d=a.bigtable,e;a.bind(d.get("nativeevent","tokenready"),f),a.bind(d.get("nativeevent","userloggedin"),f),a.bind(d.get("nativeevent","userloginfailed"),f),a.bind(d.get("nativeevent","userloggedout"),f)}()