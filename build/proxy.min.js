(function(){var a,b=window.T;a={name:"OpenJS",version:"2.0",debug:!1,noConflict:function(){return b&&(window.T=b),a},copy:function(a,b,c,d){for(var e in b)if(c||typeof a[e]=="undefined")a[e]=d?d(b[e]):b[e];return a},create:function(a,b){var c=this,d=a?a.split("."):[],e=d.length;for(var f=0;f<e;f++){var g=d[f],h=c[g];h||(h=b&&f+1===e?b:{},c[g]=h),c=h}return c},extend:function(b,c,d){return a.copy(typeof b=="string"?a.create.call(this,b):b,c,d)},uid:function(a){var b;a=a||6,b=Math.random().toString(16).substr(2);if(b.length>a)b=b.substr(0,a);else if(b.length<a)for(var c=0,d=a-b.length;c<d;c++)b+=Math.random().toString(16).substr(2,1);return b}},a.provide=a.create,window.QQWBENVS&&typeof QQWBENVS.Debug!="undefined"&&(a.debug=QQWBENVS.Debug),window.QQWB=window.T=a})(),QQWB.extend("log",{CRITICAL:50,ERROR:40,WARNING:30,INFO:20,DEBUG:10,NOTSET:0,_level:0,setLevel:function(a){return this._level=a,this},debug:function(a){return this.DEBUG>=this._level&&this._out("DEBUG",a),this},info:function(a){return this.INFO>=this._level&&this._out("INFO",a),this},warning:function(a){return this.WARNING>=this._level&&this._out("WARNING",a),this},error:function(a){return this.ERROR>=this._level&&this._out("ERROR",a),this},critical:function(a){return this.CRITICAL>=this._level&&this._out("CRITICAL",a),this},_out:function(a,b){var c;output=[window.name?window.name:"",window.opener||window.name===QQWB.bigtable.get("authwindow","name")?"#":"",window!=window.parent?"*":"",QQWB.name,": ","["+a+"] ",QQWB.time.shortTime()+" ",b].join(""),c=QQWB.bigtable.get("log","latest"),c||(c=QQWB.bigtable.put("log","latest",[])),c.length>=100&&c.shift(),c.push(output),QQWB.debug&&window.console&&window.console.log(output)},latest:function(){var a=QQWB.bigtable.get("log","latest");return a?a.join("\n"):""}}),QQWB.log.warn=QQWB.log.warning,window.QQWBENVS&&typeof QQWBENVS.LogLevel=="number"&&QQWB.log.setLevel(QQWBENVS.LogLevel),QQWB.extend("time",{now:function(){return this.dateNow().getTime()},secondsNow:function(){return Math.round(this.now()/1e3)},dateNow:function(){return new Date},shortTime:function(a,b){var c;return a instanceof Date||(b=a,a=this.dateNow()),[a.getFullYear(),"/",a.getMonth(),"/",a.getDate()," ",(c=a.getHours())&&c<10?"0"+c:c,":",(c=a.getMinutes())&&c<10?"0"+c:c,":",(c=a.getSeconds())&&c<10?"0"+c:c].join("")}}),QQWB.extend("String",{_trimLeft:/^\s+/,_trimRight:/\s+$/,isString:function(a){return typeof a=="string"},ltrim:function(a){return a==null?"":a.toString().replace(this._trimLeft,"")},rtrim:function(a){return a==null?"":a.toString().replace(this._trimRight,"")},trim:String.prototype.trim?function(a){return a==null?"":String.prototype.trim.call(a)}:function(a){return a==null?"":a.toString().replace(this._trimLeft,"").replace(this._trimRight,"")},startsWith:String.prototype.startsWith?function(a,b){return a==null?!1:String.prototype.startsWith.call(a,b)}:function(a,b){return a==null?!1:a.toString().indexOf(b)==0},endsWith:String.prototype.endsWith?function(a,b){return a==null?!1:String.prototype.endsWith.call(a,b)}:function(a,b){return a==null?!1:a.toString().lastIndexOf(b)>=0&&a.toString().lastIndexOf(b)+b.length==a.length}}),function(){function b(a,b){var c=QQWB,d=c.String;return d.isString(a)||c.log.warn("bigtable inName is not a str"),d.isString(b)||c.log.warn("bigtable inKey is not a str"),["bt",a,b].join("_")}var a={};QQWB.extend("bigtable",{put:function(c,d,e){var f=b(c,d);return a[f]=e,a[f]},get:function(c,d,e){var f=b(c,d),g=a[f],h;return e!=h&&g==h&&(g=e,a[f]=g),g},del:function(c,d){var e=b(c,d);try{delete a[e]}catch(f){a[e]=null}},has:function(c,d){var e=b(c,d);return a.hasOwnProperty(e)},_:function(){return a}}),QQWB.bigtable.set=QQWB.bigtable.put}(),QQWB.extend("Function",{isFunction:function(a){return typeof a=="function"}}),QQWB.extend("Array",{isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"},inArray:function(a,b){for(var c=0,d=a.length;c<d;c++)if(b===a[c])return!0;return!1},fromString:function(a,b,c){return QQWB.String.isString(a)?(b=b||"",c?a.split(b,c):a.split(b)):[]},fromArguments:function(a,b){return typeof a!="object"?[]:b?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a)},toArray:function(a){return typeof a=="string"?a.split(""):typeof a=="object"?Array.prototype.slice.call(a,0):this.toArray(a.toString())},each:function(a,b){for(var c=0,d=a.length;c<d;c++)if(!1===b(c,a[c]))break},forEach:function(a,b,c){var d=[];if(a){var e=c||this;for(var f=0,g=a.length,h;f<g;f++)h=b.call(e,a[f],f,a),h!==undefined&&d.push(h)}return d},get:function(a,b){var c=a.length;if(Math.abs(b)<c)return b>=0?a[b]:a[c+b]}}),function(){var a;a=function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,f,g;b&&(g=b,b=0);for(var h=0,i=c.length;h<i;h++)f=c[h],QQWB.Array.isArray(f)?e.done.apply(e,f):QQWB.Function.isFunction(f)&&a.push(f);g&&e.resolveWith(g[0],g[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){return e.resolveWith(this,arguments),this},isResolved:function(){return!!c||!!b},cancel:function(){return d=1,a=[],this}};return e},QQWB.extend("deferred",{deferred:function(b){var c,d=a(),e=a();return QQWB.extend(d,{fail:e.done,then:function(a,b){return d.done(a).fail(b),this},always:function(){return d.done.apply(d,arguments).fail.apply(this,arguments)},rejectWith:e.resolveWith,reject:e.resolve,isRejected:e.isResolved,promise:function(a){var b="done fail isResolved isRejected promise then always success error complete whatever".split(" ");if(a==null){if(c)return c;c=a={}}var e=b.length;while(e--)a[b[e]]=d[b[e]];return a}}),d.success=d.done,d.error=d.fail,d.complete=d.whatever=d.always,d.done(e.cancel).fail(d.cancel),delete d.cancel,b&&b.call(d,d),d},when:function(a){function f(a){return function(c){b[a]=arguments.length>1?QQWB.Array.fromArguments(arguments):c,--d||e.resolveWith(e,QQWB.Array.fromArguments(b))}}var b=arguments,c=b.length,d=c,e=c<=1&&a&&QQWB.Function.isFunction(a.promise)?a:QQWB.deferred.deferred();if(c>1)for(var g=0;g<c;g++)b[g]&&QQWB.Function.isFunction(b[g].promise)?b[g].promise().then(f(g),e.reject):--d,d||e.resolveWith(e,b);else e!==a&&e.resolveWith(e,c?[a]:[]);return e.promise()}}),QQWB.task=QQWB.when=QQWB.deferred.when}(),function(){var a=QQWB,b=a.bigtable,c="http://open.t.qq.com";b.put("uri","api",[c,"/api"].join("")),b.put("uri","auth",[c,"/oauth2_html/login.php"].join("")),b.put("uri","html5proxy",[c,"/proxy/proxy.html"].join("")),b.put("uri","flashas3proxy",[c,"/proxy/proxy_as3_v2.swf"].join("")),b.put("uri","exchangetoken",[c,"/cgi-bin/exchange_token"].join("")),b.put("uri","autotoken",[c,"/cgi-bin/auto_token"].join("")),b.put("authwindow","name","authClientProxy_ee5a0f93"),b.put("authwindow","width","575"),b.put("authwindow","height","465"),window.QQWBENVS&&typeof QQWBENVS.CookieDomain!="undefined"?b.put("cookie","domain",QQWBENVS.CookieDomain):b.put("cookie","domain",""),window.QQWBENVS&&typeof QQWBENVS.CookiePath!="undefined"?b.put("cookie","path",QQWBENVS.CookiePath):b.put("cookie","path","/"),b.put("cookie","accesstokenname","QQWBToken"),b.put("cookie","refreshtokenname","QQWBRefreshToken"),b.put("nativeevent","userloggedin","UserLoggedIn"),b.put("nativeevent","userloginfailed","UserLoginFailed"),b.put("nativeevent","userloggedout","UserLoggedOut"),b.put("nativeevent","tokenready","tokenReady"),b.put("nativeevent","documentready","documentReady"),b.put("nativeevent","everythingready","everythingReady"),b.put("solution","deferred",a.deferred.deferred()),b.put("solution","jscallbackname","onFlashReady_a1f5b4ce"),b.put("api","count",0),b.put("ping","urlbase","http://btrace.qq.com/collect"),b.put("ping","paramorder",["ftime","sIp","iQQ","sBiz","sOp","iSta","iTy","iFlow"]),b.put("ping","paramsep",";"),b.put("io","timeout",3e4),QQWB.provide("init",function(a){var b=QQWB,c=b.bigtable,d=b.ping,e=b.log,f="base",g;g=c.get("boot","tokenready");if(c.get(f,"inited")===!0){e.warning("already initialized");return}e.info("init signal has arrived"),a=b.extend({callbackurl:document.location.href.replace(location.search,"").replace(location.hash,""),pingback:!0,synclogin:!0,autoclose:!0,samewindow:!1},a,!0),c.put(f,"pingback",a.pingback),c.put(f,"autoclose",a.autoclose),c.put(f,"samewindow",a.samewindow);var h=b._token.getAccessToken(),i=b._token.getAccessToken(!0),j=b._token.getRefreshToken(),k=j&&!h&&i,l=!j&&!h&&a.synclogin;a.appkey&&(e.info("client id is "+a.appkey),c.put("base","appkey",a.appkey)),e.info("client proxy uri is "+a.callbackurl),c.put("uri","redirect",a.callbackurl),k?(g.lock(),e.info("exchanging refresh token to access token..."),QQWB._token.exchangeForToken(function(b){a.synclogin&&b.error&&(QQWB.log.warning("exchange token has failed, trying to retrieve a new access_token..."),g.lock(),QQWB._token.getNewAccessToken(function(){g.unlock()})),g.unlock()})):l&&(g.lock(),e.info("retrieving new access token..."),b._token.getNewAccessToken(function(){g.unlock()})),c.put(f,"inited",!0),g.unlock();if(d&&a.pingback){d.pingInit();if(typeof a.pingback=="number"&&a.pingback>1||typeof a.pingback=="boolean")b.bind(c.get("nativeevent","userloggedin"),d.pingLoggedIn),b.bind(c.get("nativeevent","userloginfailed"),d.pingLoggedInFailed)}return b})}(),function(){var a=QQWB,b=a.bigtable,c=a.log,d=a.time,e=b.get("io","timeout"),f,g,h,i=0,j,k,l;f=function(a){var b;return{send:function(f){var g=d.now(),h=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=setTimeout(function(){c.error("load script "+a.url+" timeout"),f(599,"timeout",d.now()-g),f=null},e);b=document.createElement("script"),b.async="async",a.charset&&(b.charset=a.charset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){if(c||!b.readyState||/loaded|complete/.test(b.readyState)){var e;clearTimeout(i),b.onload=b.onreadystatechange=null,h&&b.parentNode&&h.removeChild(b),b=null,f&&(e=d.now()-g,c?f(-1,"aborted",e):f(200,"success",e),f=null)}},b.onerror=function(a){clearTimeout(i),f&&f(404,a,d.now()-g),f=null},h.insertBefore(b,h.firstChild)},abort:function(){b&&b.onload(0,1)}}},g=function(b){var f;return{send:function(g){var h=d.now(),i=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),j=setTimeout(function(){c.error("ajax timeout, url "+b.url),g(599,"timeout",d.now()-h),g=null},e);b.async||(b.async="async"),b.username?i.open(b.type,b.url,b.async,b.username,b.password):i.open(b.type,b.url,b.async);try{b.type.toUpperCase()=="POST"&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("X-Requested-From","openjs"+a.version)}catch(k){c.warning("set header error "+k)}i.send(b.data||null),f=function(e,k){var l,m,n,o,p,q;try{if(f&&(k||i.readyState===4)){f=null;if(k)i.readyState!==4?(clearTimeout(j),i.abort(),g&&g(-1,"aborted",d.now()-h),g=null):c.debug("abort ajax failed, already finish");else{clearTimeout(j),l=i.status,n=i.getAllResponseHeaders()||"",o={},q=i.responseXML,q&&q.documentElement&&(o.xml=q),o.text=i.responseText;try{m=i.statusText}catch(r){m=""}l===1223&&(l=204),b.dataType.toLowerCase()=="json"?p=a.JSON.fromString(o.text):b.dataType.toLowerCase()=="xml"?p=o.xml:p=o.text}g(l,m,d.now()-h,p,o.text,n,b.dataType),g=null}}catch(s){clearTimeout(j),c.error("caught exception "+[s.type,s.message].join(" ")+" in ioajax"),g(-2,"exception "+s,d.now()-h),g=null}},!b.async||i.readyState===4?f():i.onreadystatechange=f},abort:function(){f&&f(0,1)}}},h=function(a){var f;return{send:function(g){var h=d.now(),j=b.get("solution","flashmovie"),k="as3callbacktkt"+ ++i,l=setTimeout(function(){c.error("flash as3 timeout, url "+a.url),g(599,"timeout",d.now()-h),g=null},e);f=function(b,e){var i,j,k,m,n,o;try{f&&(f=null,clearTimeout(l),e?(g&&g(-1,"aborted",d.now()-h),g=null):(i=this.httpStatus,j=this.httpStatus==200?"ok":"",k="",m={},m.text=this.httpResponseText,a.dataType.toLowerCase()=="json"?n=QQWB.JSON.fromString(m.text):a.dataType.toLowerCase()=="xml"?n=QQWB.XML.fromString(m.text):n=m.text),g(i,j,d.now()-h,n,m.text,k,a.dataType),g=null)}catch(p){clearTimeout(l),c.error("caught exception "+[p.type,p.message].join(" ")+" in ioas3"),g(-2,"exception "+p,d.now()-h),g=null}},b.put("io",k,f),j&&j.httpRequest?j.httpRequest(a.url,a.data,a.type,k):c.critical("flash transportation object error")},abort:function(){f&&f(0,1)}}},window.onFlashRequestComplete_8df046=function(a){var d,e;if(!a.ticket){c.error("ticket doesn't exists in response");return}d=b.get("io",a.ticket),e=a.srcEvent,d.readyState||(d.readyState=0),/httpStatus/i.test(e.type)?(d.httpStatus=e.status,d.readyState++):/error/i.test(e.type)?(d.httpError=e.type,d.readyState++):/complete/i.test(e.type)&&(d.httpResponseText=e.target.data,d.readyState++),d.readyState==2&&(d.call(d),b.del("io",a.ticket))},k=function(a){return function(b,c,d,e,f,g,h){var i,j;b!==200?(b=2e6+Math.abs(b?b:0),a.reject(b,c,d,"")):typeof (i=QQWB.weibo.util.parseRetCode(f))=="number"&&0!==i?(j=QQWB.weibo.util.parseErrorCode(f),b=1e6+i*1e3+500+(j?j:0),a.reject(b,QQWB.weibo.util.getErrorMessage(i,j),d,f)):a.resolve(b,c,d,e,g,h)}},l=function(a){return function(b,c,d,e,f,g,h){b!==200?a.reject(b,c,d,""):a.resolve(e,d,f)}},QQWB.extend("io",{flashAjax:function(a){var b=QQWB.deferred.deferred(),c={type:"get",dataType:"json"};return QQWB.extend(c,a,!0),h(c).send(k(b)),b.promise()},ajax:function(a){var b=QQWB.deferred.deferred(),c={type:"get",dataType:"json"};return QQWB.extend(c,a,!0),g(c).send(k(b)),b.promise()},ajax2:function(a){var b=QQWB.deferred.deferred(),c={type:"get",dataType:"json"};return QQWB.extend(c,a,!0),g(c).send(l(b)),b.promise()},script:function(a,b){var b=b||"utf-8",c=QQWB.deferred.deferred();return f({charset:b,url:a}).send(function(a,b,d){a!==200?c.reject(a,b,d):c.resolve(a,b,d)}),c.promise()},jsonp:function(a){var b=QQWB.deferred.deferred(),d="jsonp_"+QQWB.uid(5),e=window.callbackName,g,h={dataType:"text",charset:"utf-8",url:""};return QQWB.extend(h,a,!0),h.data&&(h.url+="?"+h.data+"&callback="+d),window[d]=function(a){var f=a;try{h.dataType.toLowerCase()==="json"?f=QQWB.JSON.fromString(a):h.dataType.toLowerCase()==="xml"&&(f=QQWB.XML.fromString(a))}catch(i){c.error("caught exception "+[i.type,i.message].join(" ")+" in ioajax"),b.reject(-2,"exception "+i,g)}b.resolve(f,g),window[d]=e},f(h).send(function(a,c,d){a!==200&&b.reject(a,c,d),g=d}),b.promise()}}),QQWB.ajax=QQWB.io.ajax2,QQWB.jsonp=QQWB.io.jsonp,QQWB.script=QQWB.io.script}(),function(){var a={1:"参数错误",2:"频率受限",3:"鉴权失败",4:"内部错误"},b={4:"过多脏话",5:"禁止访问",6:"记录不存在",8:"内容过长",9:"内容包含垃圾信息",10:"发表太快，频率限制",11:"源消息不存在",12:"未知错误",13:"重复发表"};QQWB.extend("weibo.util",{parseRetCode:function(a){var b=a.match(/\"ret\":(\d+)\}/)||a.match(/<ret>(\d+)<\/ret>/);return b?parseInt(b[1],10):b},parseErrorCode:function(a){var b=a.match(/\"errcode\":(-?\d+)/)||a.match(/<errcode>(\d+)<\/errcode>/);return b?parseInt(b[1],10):b},getErrorMessage:function(c,d){var e=[],c=c+"",d=d+"",f=a[c],g=b[d];return f&&e.push(f),g&&e.push(g),e.length>0?e.join(","):"未知错误"},compat:function(a){return!QQWB.String.startsWith(a,"/")&&(a="/"+a),a.toLowerCase()}})}(),QQWB.extend("queryString",{encode:function(a,b,c,d){var e=/%20/g,f=b||"&",g=c||encodeURIComponent,h=[],i=[],j,k;for(j in a)if(a.hasOwnProperty(j)){k=a[j];if(k!==null&&typeof k!="undefined"){j=g(j).replace(e,"+"),k=g(k).replace(e,"+");if(!d)h.push(j+"="+k);else for(var l=0,m=d.length;l<m;l++)d[l]===j&&(h[l]=j+"="+k)}}for(var n=0,o=h.length;n<o;n++)typeof h[n]!="undefined"&&i.push(h[n]);return h=i,i=null,h.join(f)},decode:function(a,b,c){var d=c||decodeURIComponent,e=b||"&",f=a.split(e),g={},h;for(var i=0,j=f.length;i<j;i++)h=f[i].split("=",2),h&&h[0]&&(g[d(h[0])]=d(h[1]));return g}});var JSON;JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),QQWB.extend("JSON",{fromString:function(a){if(!a||!QQWB.String.isString(a))return{};a=a.replace(/^\s+/,"").replace(/\s+$/,"");if(window.JSON&&window.JSON.parse)a=window.JSON.parse(a);else if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))a=(new Function("return "+data))();else throw new SyntaxError("Invalid JSON: "+a);return a},stringify:function(a){return a==null?"":window.JSON.stringify(a)},toString:function(a){return QQWB.JSON.stringify(a)},parse:function(a){return a==null?{}:window.JSON.parse(a)}},!0),function(){function l(a,b,c,g){var i={type:d.trim(g.toUpperCase()),url:e.get("uri","api")+a,data:f.encode(b),dataType:d.trim(c.toLowerCase())};return i.type=="GET"&&(i.url+=i.data?"?"+i.data:"",delete i.data),h.ajax(i)}var a=QQWB,b=a.JSON,c=a.Array,d=a.String,e=a.bigtable,f=a.queryString,g=a.log,h=a.io,i,j="*",k=window.parent;g.info("[proxy] proxy is running"),window!=k&&k.postMessage("success",j),i=function(a){var d,e,f,h;try{d=b.fromString(a.data)}catch(i){}d&&d.id&&d.data?(e=d.id,f=d.data,h=f[0],f[2].toLowerCase()=="xml"&&(f[2]="xmltext"),h?l.apply(this,f).complete(function(){k.postMessage(b.stringify({id:e,data:c.fromArguments(arguments)}),j)}):(k.postMessage(b.stringify({id:e,data:[-1,"interface can not be empty"]}),j),g.error("[proxy] interface cant not be empty"))):g.warn("[proxy] ignore unexpected message "+a.data)},window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent&&window.attachEvent("onmessage",i)}()